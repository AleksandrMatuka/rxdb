"use strict";(self.webpackChunkrxdb=self.webpackChunkrxdb||[]).push([[2584],{574:(e,t,r)=>{r.d(t,{Tj:()=>Vr,C3:()=>Zr,IA:()=>Ur});var a=r(7329);function n(e,t){var r=e.get(t);if(void 0===r)throw new Error("missing value from map "+t);return r}function i(e,t,r,a){var n=e.get(t);return void 0===n?(n=r(),e.set(t,n)):a&&a(n),n}function s(e){return Object.assign({},e)}function o(e,t){if(void 0===t&&(t=!1),!e)return e;if(!t&&Array.isArray(e))return e.sort(((e,t)=>"string"==typeof e&&"string"==typeof t?e.localeCompare(t):"object"==typeof e?1:-1)).map((e=>o(e,t)));if("object"==typeof e&&!Array.isArray(e)){var r={};return Object.keys(e).sort(((e,t)=>e.localeCompare(t))).forEach((a=>{r[a]=o(e[a],t)})),r}return e}var c=function e(t){if(!t)return t;if(null===t||"object"!=typeof t)return t;if(Array.isArray(t)){for(var r=new Array(t.length),a=r.length;a--;)r[a]=e(t[a]);return r}var n={};for(var i in t)n[i]=e(t[i]);return n};function l(e,t,r){return Object.defineProperty(e,t,{get:function(){return r}}),r}var h=e=>{var t=typeof e;return null!==e&&("object"===t||"function"===t)},d=new Set(["__proto__","prototype","constructor"]),u=new Set("0123456789");function m(e){var t=[],r="",a="start",n=!1;for(var i of e)switch(i){case"\\":if("index"===a)throw new Error("Invalid character in an index");if("indexEnd"===a)throw new Error("Invalid character after an index");n&&(r+=i),a="property",n=!n;break;case".":if("index"===a)throw new Error("Invalid character in an index");if("indexEnd"===a){a="property";break}if(n){n=!1,r+=i;break}if(d.has(r))return[];t.push(r),r="",a="property";break;case"[":if("index"===a)throw new Error("Invalid character in an index");if("indexEnd"===a){a="index";break}if(n){n=!1,r+=i;break}if("property"===a){if(d.has(r))return[];t.push(r),r=""}a="index";break;case"]":if("index"===a){t.push(Number.parseInt(r,10)),r="",a="indexEnd";break}if("indexEnd"===a)throw new Error("Invalid character after an index");default:if("index"===a&&!u.has(i))throw new Error("Invalid character in an index");if("indexEnd"===a)throw new Error("Invalid character after an index");"start"===a&&(a="property"),n&&(n=!1,r+="\\"),r+=i}switch(n&&(r+="\\"),a){case"property":if(d.has(r))return[];t.push(r);break;case"index":throw new Error("Index was not closed");case"start":t.push("")}return t}function p(e,t){if("number"!=typeof t&&Array.isArray(e)){var r=Number.parseInt(t,10);return Number.isInteger(r)&&e[r]===e[t]}return!1}function f(e,t){if(p(e,t))throw new Error("Cannot use string index")}function v(e,t,r){if(Array.isArray(t)&&(t=t.join(".")),!t.includes(".")&&!t.includes("["))return e[t];if(!h(e)||"string"!=typeof t)return void 0===r?e:r;var a=m(t);if(0===a.length)return r;for(var n=0;n<a.length;n++){var i=a[n];if(null==(e=p(e,i)?n===a.length-1?void 0:null:e[i])){if(n!==a.length-1)return r;break}}return void 0===e?r:e}function y(e,t,r){if(Array.isArray(t)&&(t=t.join(".")),!h(e)||"string"!=typeof t)return e;for(var a=e,n=m(t),i=0;i<n.length;i++){var s=n[i];f(e,s),i===n.length-1?e[s]=r:h(e[s])||(e[s]="number"==typeof n[i+1]?[]:{}),e=e[s]}return a}var g=r(7810),b=r(3836),x=r(1449),w=r(6343),j={isDevMode:()=>!1,deepFreezeWhenDevMode:e=>e,tunnelErrorMessage:e=>"RxDB Error-Code "+e+".\n        Error messages are not included in RxDB core to reduce build size.\n        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html\n        - or search for the error code here: https://github.com/pubkey/rxdb/search?q="+e+"\n        "};function k(e,t,r){return"RxError ("+t+"):\n"+e+"\n"+function(e){var t="";return 0===Object.keys(e).length?t:(t+="Given parameters: {\n",t+=Object.keys(e).map((t=>{var r="[object Object]";try{r="errors"===t?e[t].map((e=>JSON.stringify(e,Object.getOwnPropertyNames(e)))):JSON.stringify(e[t],(function(e,t){return void 0===t?null:t}),2)}catch(a){}return t+":"+r})).join("\n"),t+="}")}(r)}var D=function(e){function t(t,r,a){var n;void 0===a&&(a={});var i=k(r,t,a);return(n=e.call(this,i)||this).code=t,n.message=i,n.parameters=a,n.rxdb=!0,n}return(0,x.A)(t,e),t.prototype.toString=function(){return this.message},(0,b.A)(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}((0,w.A)(Error)),_=function(e){function t(t,r,a){var n;void 0===a&&(a={});var i=k(r,t,a);return(n=e.call(this,i)||this).code=t,n.message=i,n.parameters=a,n.rxdb=!0,n}return(0,x.A)(t,e),t.prototype.toString=function(){return this.message},(0,b.A)(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}((0,w.A)(TypeError));function R(e,t){return new D(e,j.tunnelErrorMessage(e),t)}function S(e,t){return new _(e,j.tunnelErrorMessage(e),t)}function I(e){return!(!e||409!==e.status)&&e}var C={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};var E=/\./g,P="abcdefghijklmnopqrstuvwxyz";function O(e){void 0===e&&(e=10);for(var t="",r=0;r<e;r++)t+=P.charAt(Math.floor(Math.random()*P.length));return t}function N(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function A(e){for(;"."===e.charAt(0);)e=e.substr(1);for(;"."===e.slice(-1);)e=e.slice(0,-1);return e}var B=1;function $(){return{lwt:B}}function M(e,t){var r=t;return v(e,r=A(r="properties."+(r=r.replace(E,".properties."))))}function T(e){return"string"==typeof e?e:e.key}function q(e,t){if("string"==typeof e.primaryKey)return t[e.primaryKey];var r=e.primaryKey;return r.fields.map((e=>{var r=v(t,e);if(void 0===r)throw R("DOC18",{args:{field:e,documentData:t}});return r})).join(r.separator)}function L(e){var t=T((e=s(e)).primaryKey);e.properties=s(e.properties),e.additionalProperties=!1,Object.prototype.hasOwnProperty.call(e,"keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes?e.indexes.slice(0):[],e.required=e.required?e.required.slice(0):[],e.encrypted=e.encrypted?e.encrypted.slice(0):[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.properties._meta=F,e.required=e.required?e.required.slice(0):[],e.required.push("_deleted"),e.required.push("_rev"),e.required.push("_meta"),e.required.push("_attachments");var r=Q(e);(0,g.Hb)(e.required,r),e.required=e.required.filter((e=>!e.includes("."))).filter(((e,t,r)=>r.indexOf(e)===t)),e.version=e.version||0;var a=e.indexes.map((e=>{var r=(0,g.k_)(e)?e.slice(0):[e];return r.includes(t)||r.push(t),"_deleted"!==r[0]&&r.unshift("_deleted"),r}));0===a.length&&a.push(function(e){return["_deleted",e]}(t)),a.push(["_meta.lwt",t]),e.internalIndexes&&e.internalIndexes.map((e=>{a.push(e)}));var n=new Set;return a.filter((e=>{var t=e.join(",");return!n.has(t)&&(n.add(t),!0)})),e.indexes=a,e}var F={type:"object",properties:{lwt:{type:"number",minimum:B,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function Q(e){var t=Object.keys(e.properties).filter((t=>e.properties[t].final)),r=T(e.primaryKey);return t.push(r),"string"!=typeof e.primaryKey&&e.primaryKey.fields.forEach((e=>t.push(e))),t}var W="docs",H="changes",z="attachments",K="dexie",U=new Map,Z=new Map;var V="__";function J(e){var t=e.split(".");if(t.length>1)return t.map((e=>J(e))).join(".");if(e.startsWith("|")){var r=e.substring(1);return V+r}return e}function G(e){var t=e.split(".");return t.length>1?t.map((e=>G(e))).join("."):e.startsWith(V)?"|"+e.substring(V.length):e}function Y(e,t){return t?(t=ee(t=s(t)),e.forEach((e=>{var r=v(t,e);y(t,e,r?"1":"0")})),t):t}function X(e,t){return t?(t=te(t=s(t)),e.forEach((e=>{var r=v(t,e);y(t,e,"1"===r)})),t):t}function ee(e){if(!e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return e;if(Array.isArray(e))return e.map((e=>ee(e)));if("object"==typeof e){var t={};return Object.entries(e).forEach((e=>{let[r,a]=e;"object"==typeof a&&(a=ee(a)),t[J(r)]=a})),t}}function te(e){if(!e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return e;if(Array.isArray(e))return e.map((e=>te(e)));if("object"==typeof e){var t={};return Object.entries(e).forEach((r=>{let[a,n]=r;("object"==typeof n||Array.isArray(e))&&(n=te(n)),t[G(a)]=n})),t}}function re(e){var t=[],r=T(e.primaryKey);t.push([r]),t.push(["_deleted",r]),e.indexes&&e.indexes.forEach((e=>{var r=(0,g.$r)(e);t.push(r)})),t.push(["_meta.lwt",r]),t.push(["_meta.lwt"]);var a=(t=t.map((e=>e.map((e=>J(e)))))).map((e=>1===e.length?e[0]:"["+e.join("+")+"]"));return(a=a.filter(((e,t,r)=>r.indexOf(e)===t))).join(", ")}async function ae(e,t){var r=await e;return(await r.dexieTable.bulkGet(t)).map((e=>X(r.booleanIndexes,e)))}function ne(e,t){return e+"||"+t}function ie(e){var t=new Set,r=[];return e.indexes?(e.indexes.forEach((a=>{(0,g.$r)(a).forEach((a=>{t.has(a)||(t.add(a),"boolean"===M(e,a).type&&r.push(a))}))})),r.push("_deleted"),(0,g.jw)(r)):r}var se=r(9092),oe=r(5734),ce={},le=r(1007);var he="undefined"!=typeof crypto&&void 0!==crypto.subtle&&"function"==typeof crypto.subtle.digest?async function(e){var t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t);return Array.prototype.map.call(new Uint8Array(r),(e=>("00"+e.toString(16)).slice(-2))).join("")}:function(e){return Promise.resolve((0,le.sc)(e))},de=r(3337),ue=String.fromCharCode(65535),me=Number.MIN_SAFE_INTEGER;function pe(e,t){var r=t.selector,a=e.indexes?e.indexes.slice(0):[];t.index&&(a=[t.index]);var n=!!t.sort.find((e=>"desc"===Object.values(e)[0])),i=new Set;Object.keys(r).forEach((t=>{var a=M(e,t);a&&"boolean"===a.type&&Object.prototype.hasOwnProperty.call(r[t],"$eq")&&i.add(t)}));var s,o=t.sort.map((e=>Object.keys(e)[0])).filter((e=>!i.has(e))).join(","),c=-1;if(a.forEach((e=>{var a=!0,l=!0,h=e.map((e=>{var t=r[e],n=t?Object.keys(t):[],i={};t&&n.length?n.forEach((e=>{if(fe.has(e)){var r=function(e,t){switch(e){case"$eq":return{startKey:t,endKey:t,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:t,inclusiveEnd:!0};case"$gte":return{startKey:t,inclusiveStart:!0};case"$lt":return{endKey:t,inclusiveEnd:!1};case"$gt":return{startKey:t,inclusiveStart:!1};default:throw new Error("SNH")}}(e,t[e]);i=Object.assign(i,r)}})):i={startKey:l?me:ue,endKey:a?ue:me,inclusiveStart:!0,inclusiveEnd:!0};return void 0===i.startKey&&(i.startKey=me),void 0===i.endKey&&(i.endKey=ue),void 0===i.inclusiveStart&&(i.inclusiveStart=!0),void 0===i.inclusiveEnd&&(i.inclusiveEnd=!0),l&&!i.inclusiveStart&&(l=!1),a&&!i.inclusiveEnd&&(a=!1),i})),d=h.map((e=>e.startKey)),u=h.map((e=>e.endKey)),m={index:e,startKeys:d,endKeys:u,inclusiveEnd:a,inclusiveStart:l,sortSatisfiedByIndex:!n&&o===e.filter((e=>!i.has(e))).join(","),selectorSatisfiedByIndex:ge(e,t.selector,d,u)},p=function(e,t,r){var a=0,n=e=>{e>0&&(a+=e)},i=10,s=(0,g.Sd)(r.startKeys,(e=>e!==me&&e!==ue));n(s*i);var o=(0,g.Sd)(r.startKeys,(e=>e!==ue&&e!==me));n(o*i);var c=(0,g.Sd)(r.startKeys,((e,t)=>e===r.endKeys[t]));n(c*i*1.5);var l=r.sortSatisfiedByIndex?5:0;return n(l),a}(0,0,m);(p>=c||t.index)&&(c=p,s=m)})),!s)throw R("SNH",{query:t});return s}var fe=new Set(["$eq","$gt","$gte","$lt","$lte"]),ve=new Set(["$eq","$gt","$gte"]),ye=new Set(["$eq","$lt","$lte"]);function ge(e,t,r,a){var n=Object.entries(t).find((t=>{let[r,a]=t;return!e.includes(r)||Object.entries(a).find((e=>{let[t,r]=e;return!fe.has(t)}))}));if(n)return!1;if(t.$and||t.$or)return!1;var i=[],s=new Set;for(var[o,c]of Object.entries(t)){if(!e.includes(o))return!1;var l=Object.keys(c).filter((e=>ve.has(e)));if(l.length>1)return!1;var h=l[0];if(h&&s.add(o),"$eq"!==h){if(i.length>0)return!1;i.push(h)}}var d=[],u=new Set;for(var[m,p]of Object.entries(t)){if(!e.includes(m))return!1;var f=Object.keys(p).filter((e=>ye.has(e)));if(f.length>1)return!1;var v=f[0];if(v&&u.add(m),"$eq"!==v){if(d.length>0)return!1;d.push(v)}}var y=0;for(var g of e){for(var b of[s,u]){if(!b.has(g)&&b.size>0)return!1;b.delete(g)}if(r[y]!==a[y]&&s.size>0&&u.size>0)return!1;y++}return!0}var be=r(744),xe=r(2779),we=r(1692),je=r(4903),ke=r(7705),De=r(2403),_e=r(6776),Re=r(6950),Se=r(6823),Ie=!1;function Ce(e){return Ie||((0,xe.DZ)(xe.hu.PIPELINE,{$sort:je.xF,$project:je.C2}),(0,xe.DZ)(xe.hu.QUERY,{$and:ke.a6,$eq:De.XV,$elemMatch:Re.Jy,$exists:Se.P,$gt:De.MR,$gte:De.fy,$in:De.oZ,$lt:De.NV,$lte:De.Q_,$ne:De.C5,$nin:De.GU,$mod:_e.Pp,$nor:ke.q3,$not:ke.En,$or:ke.sU,$regex:_e.WP,$size:Re.Ig,$type:Se.T}),Ie=!0),new we.X(e)}function Ee(e,t){var r=T(e.primaryKey);t=s(t);var a=c(t);if("number"!=typeof a.skip&&(a.skip=0),a.selector?(a.selector=a.selector,Object.entries(a.selector).forEach((e=>{let[t,r]=e;"object"==typeof r&&null!==r||(a.selector[t]={$eq:r})}))):a.selector={},a.index){var n=(0,g.$r)(a.index);n.includes(r)||n.push(r),a.index=n}if(a.sort)a.sort.find((e=>{return t=e,Object.keys(t)[0]===r;var t}))||(a.sort=a.sort.slice(0),a.sort.push({[r]:"asc"}));else if(a.index)a.sort=a.index.map((e=>({[e]:"asc"})));else{if(e.indexes){var i=new Set;Object.entries(a.selector).forEach((e=>{let[t,r]=e;("object"!=typeof r||null===r||!!Object.keys(r).find((e=>fe.has(e))))&&i.add(t)}));var o,l=-1;e.indexes.forEach((e=>{var t=(0,g.k_)(e)?e:[e],r=t.findIndex((e=>!i.has(e)));r>0&&r>l&&(l=r,o=t)})),o&&(a.sort=o.map((e=>({[e]:"asc"}))))}a.sort||(a.sort=[{[r]:"asc"}])}return a}function Pe(e,t){if(!t.sort)throw R("SNH",{query:t});var r=[];t.sort.forEach((e=>{var t,a,n,i=Object.keys(e)[0],s=Object.values(e)[0];r.push({key:i,direction:s,getValueFn:(t=i,a=t.split("."),n=a.length,1===n?e=>e[t]:e=>{for(var t=e,r=0;r<n;++r)if(void 0===(t=t[a[r]]))return t;return t})})}));return(e,t)=>{for(var a=0;a<r.length;++a){var n=r[a],i=n.getValueFn(e),s=n.getValueFn(t);if(i!==s)return"asc"===n.direction?(0,be.UD)(i,s):(0,be.UD)(s,i)}}}function Oe(e,t){if(!t.sort)throw R("SNH",{query:t});var r=Ce(t.selector);return e=>r.test(e)}async function Ne(e,t){var r=await e.exec();return r?Array.isArray(r)?Promise.all(r.map((e=>t(e)))):await t(r):null}function Ae(e){return e===me?-1/0:e}function Be(e,t,r){return e.includes(t)?r===ue||!0===r?"1":"0":r}function $e(e,t,r){if(!r){if("undefined"==typeof window)throw new Error("IDBKeyRange missing");r=window.IDBKeyRange}var a=t.startKeys.map(((r,a)=>{var n=t.index[a];return Be(e,n,r)})).map(Ae),n=t.endKeys.map(((r,a)=>{var n=t.index[a];return Be(e,n,r)})).map(Ae);return r.bound(a,n,!t.inclusiveStart,!t.inclusiveEnd)}async function Me(e,t){var r=await e.internals,a=t.query,n=a.skip?a.skip:0,i=n+(a.limit?a.limit:1/0),s=t.queryPlan,o=!1;s.selectorSatisfiedByIndex||(o=Oe(e.schema,t.query));var c=$e(r.booleanIndexes,s,r.dexieDb._options.IDBKeyRange),l=s.index,h=[];if(await r.dexieDb.transaction("r",r.dexieTable,(async e=>{var t,a=e.idbtrans.objectStore(W);t="["+l.map((e=>J(e))).join("+")+"]";var n=a.index(t).openCursor(c);await new Promise((e=>{n.onsuccess=function(t){var a=t.target.result;if(a){var n=X(r.booleanIndexes,a.value);o&&!o(n)||h.push(n),s.sortSatisfiedByIndex&&h.length===i?e():a.continue()}else e()}}))})),!s.sortSatisfiedByIndex){var d=Pe(e.schema,t.query);h=h.sort(d)}return{documents:h=h.slice(n,i)}}function Te(e){for(var t="",r=0;r<e.length;r++){var a=e[r];if("-"===a)return parseInt(t,10);t+=a}throw new Error("malformatted revision: "+e)}function qe(e,t){return(t?Te(t._rev)+1:1)+"-"+e}var Le={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function Fe(e,t){Le[e].length>0&&Le[e].forEach((e=>e(t)))}function Qe(e,t){return Promise.all(Le[e].map((e=>e(t))))}var We="_rxdb_internal";async function He(e,t){var r=(await e.findDocumentsById([t],!1))[0];return r||void 0}async function ze(e,t,r){var a=await e.bulkWrite([t],r);if(a.error.length>0)throw a.error[0];return a.success[0]}function Ke(e,t,r,a){if(a)throw 409===a.status?R("CONFLICT",{collection:e.name,id:t,writeError:a,data:r}):422===a.status?R("VD2",{collection:e.name,id:t,writeError:a,data:r}):a}function Ue(e){return{previous:e.previous,document:Ze(e.document)}}function Ze(e){if(!e._attachments||0===Object.keys(e._attachments).length)return e;var t=s(e);return t._attachments={},Object.entries(e._attachments).forEach((e=>{let[r,a]=e;var n,i,s;t._attachments[r]=(s=(n=a).data)?{length:(i=s,atob(i).length),digest:n.digest,type:n.type}:n})),t}function Ve(e){return Object.assign({},e,{_meta:s(e._meta)})}function Je(e,t,r){j.deepFreezeWhenDevMode(r);var a={originalStorageInstance:t,schema:t.schema,internals:t.internals,collectionName:t.collectionName,databaseName:t.databaseName,options:t.options,bulkWrite(r,a){for(var n=e.token,i=new Array(r.length),s=(0,oe.t)(),o=0;o<r.length;o++){var c=r[o],l=Ve(c.document);l._meta.lwt=s;var h=c.previous;l._rev=qe(n,h),i[o]={document:l,previous:h}}return Fe("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:i}),e.lockedRun((()=>t.bulkWrite(i,a))).then((r=>{var n={error:[],success:r.success.slice(0)},i=0===r.error.length?[]:r.error.filter((e=>!(409!==e.status||e.writeRow.previous||e.writeRow.document._deleted||!(0,de.ZN)(e.documentInDb)._deleted)||(n.error.push(e),!1)));if(i.length>0){var s=i.map((t=>({previous:t.documentInDb,document:Object.assign({},t.writeRow.document,{_rev:qe(e.token,t.documentInDb)})})));return e.lockedRun((()=>t.bulkWrite(s,a))).then((e=>((0,g.Hb)(n.error,e.error),(0,g.Hb)(n.success,e.success),n)))}return r}))},query:r=>e.lockedRun((()=>t.query(r))),count:r=>e.lockedRun((()=>t.count(r))),findDocumentsById:(r,a)=>e.lockedRun((()=>t.findDocumentsById(r,a))),getAttachmentData:(r,a,n)=>e.lockedRun((()=>t.getAttachmentData(r,a,n))),getChangedDocumentsSince:t.getChangedDocumentsSince?(r,a)=>e.lockedRun((()=>t.getChangedDocumentsSince((0,de.ZN)(r),a))):void 0,cleanup:r=>e.lockedRun((()=>t.cleanup(r))),remove:()=>(e.storageInstances.delete(a),e.lockedRun((()=>t.remove()))),close:()=>(e.storageInstances.delete(a),e.lockedRun((()=>t.close()))),changeStream:()=>t.changeStream(),conflictResultionTasks:()=>t.conflictResultionTasks(),resolveConflictResultionTask(e){if(e.output.isEqual)return t.resolveConflictResultionTask(e);var r=s(Object.assign({},e.output.documentData,{_meta:$(),_rev:"",_attachments:{}}));return delete r._meta,delete r._rev,delete r._attachments,t.resolveConflictResultionTask({id:e.id,output:{isEqual:!1,documentData:r}})}};return e.storageInstances.add(a),a}var Ge=r(3561),Ye=r(703),Xe=new Map;function et(e,t){var r=Xe.get(e);if(r)return r.refs.delete(t),0===r.refs.size?(Xe.delete(e),r.bc.close()):void 0}function tt(e,t,r,a){if(t.multiInstance){var n=a||function(e,t,r,a){var n=Xe.get(t);return n||(n={bc:new Ye.X2(["RxDB:",e,r].join("|")),refs:new Set},Xe.set(t,n)),n.refs.add(a),n.bc}(e,t.databaseInstanceToken,r.databaseName,r),i=new se.B,s=r=>{r.storageName===e&&r.databaseName===t.databaseName&&r.collectionName===t.collectionName&&r.version===t.schema.version&&i.next(r.eventBulk)};n.addEventListener("message",s);var o=r.changeStream(),c=!1,l=o.subscribe((r=>{c||n.postMessage({storageName:e,databaseName:t.databaseName,collectionName:t.collectionName,version:t.schema.version,eventBulk:r})}));r.changeStream=function(){return i.asObservable().pipe((0,Ge.X)(o))};var h=r.close.bind(r);r.close=async function(){return c=!0,l.unsubscribe(),n.removeEventListener("message",s),a||await et(t.databaseInstanceToken,r),h()};var d=r.remove.bind(r);r.remove=async function(){return c=!0,l.unsubscribe(),n.removeEventListener("message",s),a||await et(t.databaseInstanceToken,r),d()}}}var rt=(0,oe.t)(),at="dexieTestMetaField",nt=!1,it=function(){function e(e,t,r,a,n,i,s,o){this.changes$=new se.B,this.instanceId=rt++,this.storage=e,this.databaseName=t,this.collectionName=r,this.schema=a,this.internals=n,this.options=i,this.settings=s,this.devMode=o,this.primaryPath=T(this.schema.primaryKey)}var t=e.prototype;return t.bulkWrite=async function(e,t){ot(this),nt||ce.premium&&"string"==typeof ce.premium&&"6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93"===await he(ce.premium)||console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join("\n")),nt=!0,e.forEach((e=>{if(!e.document._rev||e.previous&&!e.previous._rev)throw R("SNH",{args:{row:e}});if(this.devMode&&e.previous&&(!e.previous._meta[at]||e.previous._meta[at]!==e.previous._rev))throw console.dir(e),new Error("missing or wrong _meta."+at)}));var r=await this.internals,a={success:[],error:[]};this.devMode&&(e=e.map((e=>{var t=Ve(e.document);return t._meta[at]=t._rev,{previous:e.previous,document:t}})));var n,i=e.map((e=>e.document[this.primaryPath]));if(await r.dexieDb.transaction("rw",r.dexieTable,r.dexieAttachmentsTable,(async()=>{var s=new Map;(await ae(this.internals,i)).forEach((e=>{var t=e;return t&&s.set(t[this.primaryPath],t),t})),n=function(e,t,r,a,n,i,s){for(var o,c=!!e.schema.attachments,l=[],h=[],d=[],u={id:O(10),events:[],checkpoint:null,context:n,startTime:(0,oe.t)(),endTime:0},m=u.events,p=[],f=[],v=[],y=r.size>0,g=a.length,b=function(){var e,n=a[x],u=n.document,g=n.previous,b=u[t],w=u._deleted,j=g&&g._deleted,k=void 0;if(y&&(k=r.get(b)),k){var D=k._rev;if(!g||g&&D!==g._rev){var _={isError:!0,status:409,documentId:b,writeRow:n,documentInDb:k};return d.push(_),1}var S=c?Ue(n):n;c&&(w?g&&Object.keys(g._attachments).forEach((e=>{f.push({documentId:b,attachmentId:e,digest:(0,de.ZN)(g)._attachments[e].digest})})):(Object.entries(u._attachments).find((t=>{let[r,a]=t;return(g?g._attachments[r]:void 0)||a.data||(e={documentId:b,documentInDb:k,isError:!0,status:510,writeRow:n,attachmentId:r}),!0})),e||Object.entries(u._attachments).forEach((e=>{let[t,r]=e;var a=g?g._attachments[t]:void 0;if(a){var n=S.document._attachments[t].digest;r.data&&a.digest!==n&&v.push({documentId:b,attachmentId:t,attachmentData:r,digest:r.digest})}else p.push({documentId:b,attachmentId:t,attachmentData:r,digest:r.digest})})))),e?d.push(e):(c?(h.push(Ue(S)),s&&s(u)):(h.push(S),s&&s(u)),o=S);var I=null,C=null,E=null;if(j&&!w)E="INSERT",I=c?Ze(u):u;else if(!g||j||w){if(!w)throw R("SNH",{args:{writeRow:n}});E="DELETE",I=(0,de.ZN)(u),C=g}else E="UPDATE",I=c?Ze(u):u,C=g;var P={documentId:b,documentData:I,previousDocumentData:C,operation:E};m.push(P)}else{var O=!!w;if(c&&Object.entries(u._attachments).forEach((t=>{let[r,a]=t;a.data?p.push({documentId:b,attachmentId:r,attachmentData:a,digest:a.digest}):(e={documentId:b,isError:!0,status:510,writeRow:n,attachmentId:r},d.push(e))})),e||(c?(l.push(Ue(n)),i&&i(u)):(l.push(n),i&&i(u)),o=n),!O){var N={documentId:b,operation:"INSERT",documentData:c?Ze(u):u,previousDocumentData:c&&g?Ze(g):g};m.push(N)}}},x=0;x<g;x++)b();return{bulkInsertDocs:l,bulkUpdateDocs:h,newestRow:o,errors:d,eventBulk:u,attachmentsAdd:p,attachmentsRemove:f,attachmentsUpdate:v}}(this,this.primaryPath,s,e,t),a.error=n.errors;var o=[];n.bulkInsertDocs.forEach((e=>{a.success.push(e.document),o.push(e.document)})),n.bulkUpdateDocs.forEach((e=>{a.success.push(e.document),o.push(e.document)})),(o=o.map((e=>Y(r.booleanIndexes,e)))).length>0&&await r.dexieTable.bulkPut(o);var c=[];n.attachmentsAdd.forEach((e=>{c.push({id:ne(e.documentId,e.attachmentId),data:e.attachmentData.data})})),n.attachmentsUpdate.forEach((e=>{c.push({id:ne(e.documentId,e.attachmentId),data:e.attachmentData.data})})),await r.dexieAttachmentsTable.bulkPut(c),await r.dexieAttachmentsTable.bulkDelete(n.attachmentsRemove.map((e=>ne(e.documentId,e.attachmentId))))})),(n=(0,de.ZN)(n)).eventBulk.events.length>0){var s=(0,de.ZN)(n.newestRow).document;n.eventBulk.checkpoint={id:s[this.primaryPath],lwt:s._meta.lwt},n.eventBulk.endTime=(0,oe.t)(),this.changes$.next(n.eventBulk)}return a},t.findDocumentsById=async function(e,t){ot(this);var r=await this.internals,a=[];return await r.dexieDb.transaction("r",r.dexieTable,(async()=>{(await ae(this.internals,e)).forEach((e=>{!e||e._deleted&&!t||a.push(e)}))})),a},t.query=function(e){return ot(this),Me(this,e)},t.count=async function(e){if(e.queryPlan.selectorSatisfiedByIndex){var t=await async function(e,t){var r=await e.internals,a=t.queryPlan,n=a.index,i=$e(r.booleanIndexes,a,r.dexieDb._options.IDBKeyRange),s=-1;return await r.dexieDb.transaction("r",r.dexieTable,(async e=>{var t,r=e.idbtrans.objectStore(W);t="["+n.map((e=>J(e))).join("+")+"]";var a=r.index(t).count(i);s=await new Promise(((e,t)=>{a.onsuccess=function(){e(a.result)},a.onerror=e=>t(e)}))})),s}(this,e);return{count:t,mode:"fast"}}return{count:(await Me(this,e)).documents.length,mode:"slow"}},t.changeStream=function(){return ot(this),this.changes$.asObservable()},t.cleanup=async function(e){ot(this);var t=await this.internals;return await t.dexieDb.transaction("rw",t.dexieTable,(async()=>{var r=(0,oe.t)()-e,a=await t.dexieTable.where("_meta.lwt").below(r).toArray(),n=[];a.forEach((e=>{"1"===e._deleted&&n.push(e[this.primaryPath])})),await t.dexieTable.bulkDelete(n)})),!0},t.getAttachmentData=async function(e,t,r){ot(this);var a=await this.internals,n=ne(e,t);return await a.dexieDb.transaction("r",a.dexieAttachmentsTable,(async()=>{var r=await a.dexieAttachmentsTable.get(n);if(r)return r.data;throw new Error("attachment missing documentId: "+e+" attachmentId: "+t)}))},t.remove=async function(){ot(this);var e=await this.internals;return await e.dexieTable.clear(),this.close()},t.close=function(){return this.closed||(this.closed=(async()=>{this.changes$.complete(),await async function(e){var t=await e,r=Z.get(e)-1;0===r?(t.dexieDb.close(),Z.delete(e)):Z.set(e,r)}(this.internals)})()),this.closed},t.conflictResultionTasks=function(){return new se.B},t.resolveConflictResultionTask=async function(e){},e}();async function st(e,t,r){var n=function(e,t,r,n){var o="rxdb-dexie-"+e+"--"+n.version+"--"+t,c=i(U,o,(()=>{var e=(async()=>{var e=s(r);e.autoOpen=!1;var t=new a.cf(o,e),i={[W]:re(n),[H]:"++sequence, id",[z]:"id"};return t.version(1).stores(i),await t.open(),{dexieDb:t,dexieTable:t[W],dexieAttachmentsTable:t[z],booleanIndexes:ie(n)}})();return U.set(o,c),Z.set(c,0),e}));return c}(t.databaseName,t.collectionName,r,t.schema),o=new it(e,t.databaseName,t.collectionName,t.schema,n,t.options,r,t.devMode);return await tt(K,t,o),Promise.resolve(o)}function ot(e){if(e.closed)throw new Error("RxStorageInstanceDexie is closed "+e.databaseName+"-"+e.collectionName)}var ct="15.21.0",lt=function(){function e(e){this.name=K,this.rxdbVersion=ct,this.settings=e}return e.prototype.createStorageInstance=function(e){return function(e){if(e.schema.keyCompression)throw R("UT5",{args:{params:e}});if((t=e.schema).encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)throw R("UT6",{args:{params:e}});var t;if(e.schema.attachments&&e.schema.attachments.compression)throw R("UT7",{args:{params:e}})}(e),st(this,e,this.settings)},e}();function ht(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var r,a;if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(a=r;0!=a--;)if(!ht(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var n=Object.keys(e);if((r=n.length)!==Object.keys(t).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(t,n[a]))return!1;for(a=r;0!=a--;){var i=n[a];if(!ht(e[i],t[i]))return!1}return!0}return e!=e&&t!=t}var dt=function(){function e(e,t){this.jsonSchema=e,this.hashFunction=t,this.indexes=function(e){return(e.indexes||[]).map((e=>(0,g.k_)(e)?e:[e]))}(this.jsonSchema),this.primaryPath=T(this.jsonSchema.primaryKey),this.finalFields=Q(this.jsonSchema)}var t=e.prototype;return t.validateChange=function(e,t){this.finalFields.forEach((r=>{if(!ht(e[r],t[r]))throw R("DOC9",{dataBefore:e,dataAfter:t,fieldName:r,schema:this.jsonSchema})}))},t.getDocumentPrototype=function(){var e={},t=M(this.jsonSchema,"");return Object.keys(t).forEach((t=>{var r=t;e.__defineGetter__(t,(function(){if(this.get&&"function"==typeof this.get)return this.get(r)})),Object.defineProperty(e,t+"$",{get:function(){return this.get$(r)},enumerable:!1,configurable:!1}),Object.defineProperty(e,t+"$$",{get:function(){return this.get$$(r)},enumerable:!1,configurable:!1}),Object.defineProperty(e,t+"_",{get:function(){return this.populate(r)},enumerable:!1,configurable:!1})})),l(this,"getDocumentPrototype",(()=>e)),e},t.getPrimaryOfDocumentData=function(e){return q(this.jsonSchema,e)},(0,b.A)(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var e={};return Object.entries(this.jsonSchema.properties).filter((e=>{let[,t]=e;return Object.prototype.hasOwnProperty.call(t,"default")})).forEach((t=>{let[r,a]=t;return e[r]=a.default})),l(this,"defaultValues",e)}},{key:"hash",get:function(){return l(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}();function ut(e,t,r){void 0===r&&(r=!0),r&&Fe("preCreateRxSchema",e);var a=L(e);a=function(e){return o(e,!0)}(a),j.deepFreezeWhenDevMode(a);var n=new dt(a,t);return Fe("createRxSchema",n),n}var mt=r(7708),pt=r(8146),ft=r(3356),vt=r(5520),yt=r(8609),gt=r(1753);function bt(e){var t=e.split("-"),r="RxDB";return t.forEach((e=>{r+=N(e)})),r+="Plugin",new Error("You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { "+r+" } from 'rxdb/plugins/"+e+"';\n            addRxPlugin("+r+");\n        ")}function xt(e){return e.documentData?e.documentData:e.previousDocumentData}var wt=function(){function e(e,t,r,a){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=e,this.primaryPath=t,this.preWrite=r,this.postWrite=a}var t=e.prototype;return t.addWrite=function(e,t){var r=e[this.primaryPath],a=i(this.queueByDocId,r,(()=>[]));return new Promise(((r,n)=>{var i={lastKnownDocumentState:e,modifier:t,resolve:r,reject:n};(0,de.ZN)(a).push(i),this.triggerRun()}))},t.triggerRun=async function(){if(!0!==this.isRunning&&0!==this.queueByDocId.size){this.isRunning=!0;var e=[],t=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(t.entries()).map((async t=>{let[r,a]=t;var n,i,s,o=(n=a.map((e=>e.lastKnownDocumentState)),i=n[0],s=Te(i._rev),n.forEach((e=>{var t=Te(e._rev);t>s&&(i=e,s=t)})),i),l=o;for(var h of a)try{l=await h.modifier(c(l))}catch(d){h.reject(d),h.reject=()=>{},h.resolve=()=>{}}try{await this.preWrite(l,o)}catch(d){return void a.forEach((e=>e.reject(d)))}e.push({previous:o,document:l})})));var r=e.length>0?await this.storageInstance.bulkWrite(e,"incremental-write"):{error:[],success:[]};return await Promise.all(r.success.map((e=>{var r=e[this.primaryPath];this.postWrite(e),n(t,r).forEach((t=>t.resolve(e)))}))),r.error.forEach((e=>{var r,a=e.documentId,s=n(t,a),o=I(e);if(o){var c=i(this.queueByDocId,a,(()=>[]));s.reverse().forEach((e=>{e.lastKnownDocumentState=(0,de.ZN)(o.documentInDb),(0,de.ZN)(c).unshift(e)}))}else{var l=R("COL20",{name:C[(r=e).status],document:r.documentId,writeError:r});s.forEach((e=>e.reject(l)))}})),this.isRunning=!1,this.triggerRun()}},e}();function jt(e){return async t=>{var r=function(e){return Object.assign({},e,{_meta:void 0,_deleted:void 0,_rev:void 0})}(t);r._deleted=t._deleted;var a=await e(r),n=Object.assign({},a,{_meta:t._meta,_attachments:t._attachments,_rev:t._rev,_deleted:void 0!==a._deleted?a._deleted:t._deleted});return void 0===n._deleted&&(n._deleted=!1),n}}var kt={get primaryPath(){if(this.isInstanceOfRxDocument)return this.collection.schema.primaryPath},get primary(){var e=this;if(e.isInstanceOfRxDocument)return e._data[e.primaryPath]},get revision(){if(this.isInstanceOfRxDocument)return this._data._rev},get deleted$(){if(this.isInstanceOfRxDocument)return this.$.pipe((0,mt.T)((e=>e._data._deleted)))},get deleted$$(){var e=this;return e.collection.database.getReactivityFactory().fromObservable(e.deleted$,e.getLatest().deleted,e.collection.database)},get deleted(){if(this.isInstanceOfRxDocument)return this._data._deleted},getLatest(){var e=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(e)},get $(){return this.collection.$.pipe((0,pt.p)((e=>!e.isLocal)),(0,pt.p)((e=>e.documentId===this.primary)),(0,mt.T)((e=>xt(e))),(0,ft.Z)(this.collection._docCache.getLatestDocumentData(this.primary)),(0,vt.F)(((e,t)=>e._rev===t._rev)),(0,mt.T)((e=>this.collection._docCache.getCachedRxDocument(e))),(0,yt.t)(de.bz))},get $$(){var e=this;return e.collection.database.getReactivityFactory().fromObservable(e.$,e.getLatest()._data,e.collection.database)},get$(e){if(j.isDevMode()){if(e.includes(".item."))throw R("DOC1",{path:e});if(e===this.primaryPath)throw R("DOC2");if(this.collection.schema.finalFields.includes(e))throw R("DOC3",{path:e});if(!M(this.collection.schema.jsonSchema,e))throw R("DOC4",{path:e})}return this.$.pipe((0,mt.T)((t=>v(t,e))),(0,vt.F)())},get$$(e){var t=this.get$(e);return this.collection.database.getReactivityFactory().fromObservable(t,this.getLatest().get(e),this.collection.database)},populate(e){var t=M(this.collection.schema.jsonSchema,e),r=this.get(e);if(!r)return gt.$A;if(!t)throw R("DOC5",{path:e});if(!t.ref)throw R("DOC6",{path:e,schemaObj:t});var a=this.collection.database.collections[t.ref];if(!a)throw R("DOC7",{ref:t.ref,path:e,schemaObj:t});return"array"===t.type?a.findByIds(r).exec().then((e=>{var t=e.values();return Array.from(t)})):a.findOne(r).exec()},get(e){return i(this._propertyCache,e,(()=>{var t=v(this._data,e);if("object"!=typeof t||null===t||Array.isArray(t))return j.deepFreezeWhenDevMode(t);var r=this;return new Proxy(s(t),{get(t,a){if("string"!=typeof a)return t[a];var n=a.charAt(a.length-1);if(a.endsWith("$$")){var i=a.slice(0,-2);return r.get$$(A(e+"."+i))}if("$"===n){var s=a.slice(0,-1);return r.get$(A(e+"."+s))}if("_"===n){var o=a.slice(0,-1);return r.populate(A(e+"."+o))}return r.get(A(e+"."+a))}})}))},toJSON(e){if(void 0===e&&(e=!1),e)return j.deepFreezeWhenDevMode(this._data);var t=s(this._data);return delete t._rev,delete t._attachments,delete t._deleted,delete t._meta,j.deepFreezeWhenDevMode(t)},toMutableJSON(e){return void 0===e&&(e=!1),c(this.toJSON(e))},update(e){throw bt("update")},incrementalUpdate(e){throw bt("update")},updateCRDT(e){throw bt("crdt")},putAttachment(){throw bt("attachments")},getAttachment(){throw bt("attachments")},allAttachments(){throw bt("attachments")},get allAttachments$(){throw bt("attachments")},async modify(e,t){var r=this._data,a=await jt(e)(r);return this._saveData(a,r)},incrementalModify(e,t){return this.collection.incrementalWriteQueue.addWrite(this._data,jt(e)).then((e=>this.collection._docCache.getCachedRxDocument(e)))},patch(e){var t=this._data,r=c(t);return Object.entries(e).forEach((e=>{let[t,a]=e;r[t]=a})),this._saveData(r,t)},incrementalPatch(e){return this.incrementalModify((t=>(Object.entries(e).forEach((e=>{let[r,a]=e;t[r]=a})),t)))},async _saveData(e,t){if(e=s(e),this._data._deleted)throw R("DOC11",{id:this.primary,document:this});await _t(this.collection,e,t);var r=await this.collection.storageInstance.bulkWrite([{previous:t,document:e}],"rx-document-save-data"),a=r.error[0];return Ke(this.collection,this.primary,e,a),await this.collection._runHooks("post","save",e,this),this.collection._docCache.getCachedRxDocument(r.success[0])},remove(){var e=this.collection;if(this.deleted)return Promise.reject(R("DOC13",{document:this,id:this.primary}));var t,r=s(this._data);return e._runHooks("pre","remove",r,this).then((async()=>{r._deleted=!0;var t=await e.storageInstance.bulkWrite([{previous:this._data,document:r}],"rx-document-remove"),a=t.error[0];return Ke(e,this.primary,r,a),t.success[0]})).then((e=>(t=e,this.collection._runHooks("post","remove",r,this)))).then((()=>this.collection._docCache.getCachedRxDocument(t)))},incrementalRemove(){return this.incrementalModify((async e=>(await this.collection._runHooks("pre","remove",e,this),e._deleted=!0,e))).then((async e=>(await this.collection._runHooks("post","remove",e._data,e),e)))},destroy(){throw R("DOC14")}};function Dt(e){void 0===e&&(e=kt);var t=function(e,t){this.collection=e,this._data=t,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return t.prototype=e,t}function _t(e,t,r){return t._meta=Object.assign({},r._meta,t._meta),j.isDevMode()&&e.schema.validateChange(r,t),e._runHooks("pre","save",t,r)}var Rt=r(2198),St=r(511),It=r(4157),Ct=r(2442),Et=r(6114);function Pt(e,t){return t.sort&&0!==t.sort.length?t.sort.map((e=>Object.keys(e)[0])):[e]}var Ot=new WeakMap;function Nt(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};var r=function(e){return i(Ot,e,(()=>{var t=e.collection,r=Ee(t.storageInstance.schema,c(e.mangoQuery)),a=t.schema.primaryPath,n=Pe(t.schema.jsonSchema,r),i=Oe(t.schema.jsonSchema,r);return{primaryKey:e.collection.schema.primaryPath,skip:r.skip,limit:r.limit,sortFields:Pt(a,r),sortComparator:(t,r)=>{var a={docA:t,docB:r,rxQuery:e};return n(a.docA,a.docB)},queryMatcher:t=>i({doc:t,rxQuery:e}.doc)}}))}(e),a=(0,de.ZN)(e._result).docsData.slice(0),n=(0,de.ZN)(e._result).docsDataMap,s=!1;return t.map((e=>function(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:j.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData?e.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}}(e))).filter(g.S7).find((e=>{var t={queryParams:r,changeEvent:e,previousResults:a,keyDocumentMap:n},i=(0,Et.kC)(t);return"runFullQueryAgain"===i||("doNothing"!==i?(s=!0,(0,Et.Cs)(i,r,e,a,n),!1):void 0)}))?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:s,newResults:a}}var At=function(){function e(){this._map=new Map}return e.prototype.getByQuery=function(e){var t=e.toString();return i(this._map,t,(()=>e))},e}();function Bt(e,t){t.uncached=!0;var r=t.toString();e._map.delete(r)}function $t(e){return e.refCount$.observers.length}var Mt,Tt,qt=(Mt=100,Tt=3e4,(e,t)=>{if(!(t._map.size<Mt)){var r=(0,oe.t)()-Tt,a=[],n=Array.from(t._map.values());for(var i of n)$t(i)>0||(0===i._lastEnsureEqual&&i._creationTime<r?Bt(t,i):a.push(i));var s=a.length-Mt;s<=0||a.sort(((e,t)=>e._lastEnsureEqual-t._lastEnsureEqual)).slice(0,s).forEach((e=>Bt(t,e)))}}),Lt=new WeakSet;var Ft=function(){function e(e,t,r){this.cacheItemByDocId=new Map,this.registry="function"==typeof FinalizationRegistry?new FinalizationRegistry((e=>{var t=e.docId,r=this.cacheItemByDocId.get(t);r&&(r[0].delete(e.revisionHeight),0===r[0].size&&this.cacheItemByDocId.delete(t))})):void 0,this.primaryPath=e,this.changes$=t,this.documentCreator=r,t.subscribe((e=>{var t=e.documentId,r=this.cacheItemByDocId.get(t);if(r){var a=xt(e);r[1]=a}}))}var t=e.prototype;return t.getLatestDocumentData=function(e){return n(this.cacheItemByDocId,e)[1]},t.getLatestDocumentDataIfExists=function(e){var t=this.cacheItemByDocId.get(e);if(t)return t[1]},(0,b.A)(e,[{key:"getCachedRxDocuments",get:function(){return l(this,"getCachedRxDocuments",Qt(this))}},{key:"getCachedRxDocument",get:function(){var e=Qt(this);return l(this,"getCachedRxDocument",(t=>e([t])[0]))}}])}();function Qt(e){var t=e.primaryPath,r=e.cacheItemByDocId,a=e.registry,n=j.deepFreezeWhenDevMode,i=e.documentCreator;return e=>{for(var s=new Array(e.length),o=[],c=0;c<e.length;c++){var l=e[c],h=l[t],d=Te(l._rev),u=void 0,m=void 0,p=r.get(h);p?m=(u=p[0]).get(d):(p=[u=new Map,l],r.set(h,p));var f=m?m.deref():void 0;f||(l=n(l),f=i(l),u.set(d,Ht(f)),a&&o.push(f)),s[c]=f}return o.length>0&&a&&(0,gt.vN)().then((()=>{for(var e=0;e<o.length;e++){var t=o[e];a.register(t,{docId:t.primary,revisionHeight:Te(t.revision)})}})),s}}function Wt(e,t){return(0,e.getCachedRxDocuments)(t)}var Ht="function"==typeof WeakRef?function(e){return new WeakRef(e)}:function(e){return{deref:()=>e}};var zt=function(){return(0,b.A)((function(e,t,r){this.time=(0,oe.t)(),this.collection=e,this.count=r,this.documents=Wt(this.collection._docCache,t)}),[{key:"docsData",get:function(){return l(this,"docsData",this.documents.map((e=>e._data)))}},{key:"docsDataMap",get:function(){var e=new Map;return this.documents.forEach((t=>{e.set(t.primary,t._data)})),l(this,"docsDataMap",e)}},{key:"docsMap",get:function(){for(var e=new Map,t=this.documents,r=0;r<t.length;r++){var a=t[r];e.set(a.primary,a)}return l(this,"docsMap",e)}}])}(),Kt=0,Ut=function(){function e(e,t,r,a){void 0===a&&(a={}),this.id=++Kt,this._execOverDatabaseCount=0,this._creationTime=(0,oe.t)(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new Rt.t(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=gt.Dr,this.op=e,this.mangoQuery=t,this.collection=r,this.other=a,t||(this.mangoQuery={selector:{}}),this.isFindOneByIdQuery=function(e,t){if(!t.skip&&t.selector&&1===Object.keys(t.selector).length&&t.selector[e]){var r=t.selector[e];if("string"==typeof r)return r;if(1===Object.keys(r).length&&"string"==typeof r.$eq)return r.$eq;if(1===Object.keys(r).length&&Array.isArray(r.$eq)&&!r.$eq.find((e=>"string"!=typeof e)))return r.$eq}return!1}(this.collection.schema.primaryPath,t)}var t=e.prototype;return t._setResultData=function(e){if("number"!=typeof e){e instanceof Map&&(e=Array.from(e.values()));var t=new zt(this.collection,e,e.length);this._result=t}else this._result=new zt(this.collection,[],e)},t._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=(0,oe.t)(),"count"===this.op){var e=this.getPreparedQuery(),t=await this.collection.storageInstance.count(e);if("slow"!==t.mode||this.collection.database.allowSlowCount)return t.count;throw R("QU14",{collection:this.collection,queryObj:this.mangoQuery})}if("findByIds"===this.op){var r=(0,de.ZN)(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,a=new Map,n=[];if(r.forEach((e=>{var t=this.collection._docCache.getLatestDocumentDataIfExists(e);if(t){if(!t._deleted){var r=this.collection._docCache.getCachedRxDocument(t);a.set(e,r)}}else n.push(e)})),n.length>0)(await this.collection.storageInstance.findDocumentsById(n,!1)).forEach((e=>{var t=this.collection._docCache.getCachedRxDocument(e);a.set(t.primary,t)}));return a}var i=async function(e){var t=[],r=e.collection;if(e.isFindOneByIdQuery)if(Array.isArray(e.isFindOneByIdQuery)){var a=e.isFindOneByIdQuery;if(a=a.filter((r=>{var a=e.collection._docCache.getLatestDocumentDataIfExists(r);return!a||(a._deleted||t.push(a),!1)})),a.length>0){var n=await r.storageInstance.findDocumentsById(a,!1);(0,g.Hb)(t,n)}}else{var i=e.isFindOneByIdQuery,s=e.collection._docCache.getLatestDocumentDataIfExists(i);if(!s){var o=await r.storageInstance.findDocumentsById([i],!1);o[0]&&(s=o[0])}s&&!s._deleted&&t.push(s)}else{var c=e.getPreparedQuery(),l=await r.storageInstance.query(c);t=l.documents}return t}(this);return i.then((e=>(this._lastExecEnd=(0,oe.t)(),e)))},t.exec=function(e){if(e&&"findOne"!==this.op)throw R("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return Jt(this).then((()=>(0,St._)(this.$))).then((t=>{if(!t&&e)throw R("QU10",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return t}))},t.toString=function(){var e=o({op:this.op,query:this.mangoQuery,other:this.other},!0),t=JSON.stringify(e);return this.toString=()=>t,t},t.getPreparedQuery=function(){var e={rxQuery:this,mangoQuery:Ee(this.collection.schema.jsonSchema,this.mangoQuery)};e.mangoQuery.selector._deleted={$eq:!1},e.mangoQuery.index&&e.mangoQuery.index.unshift("_deleted"),Fe("prePrepareQuery",e);var t=Gt(this.collection.schema.jsonSchema,e.mangoQuery);return this.getPreparedQuery=()=>t,t},t.doesDocumentDataMatch=function(e){return!e._deleted&&this.queryMatcher(e)},t.remove=function(){return this.exec().then((e=>Array.isArray(e)?Promise.all(e.map((e=>e.remove()))):e.remove()))},t.incrementalRemove=function(){return Ne(this.asRxQuery,(e=>e.incrementalRemove()))},t.update=function(e){throw bt("update")},t.patch=function(e){return Ne(this.asRxQuery,(t=>t.patch(e)))},t.incrementalPatch=function(e){return Ne(this.asRxQuery,(t=>t.incrementalPatch(e)))},t.modify=function(e){return Ne(this.asRxQuery,(t=>t.modify(e)))},t.incrementalModify=function(e){return Ne(this.asRxQuery,(t=>t.incrementalModify(e)))},t.where=function(e){throw bt("query-builder")},t.sort=function(e){throw bt("query-builder")},t.skip=function(e){throw bt("query-builder")},t.limit=function(e){throw bt("query-builder")},(0,b.A)(e,[{key:"$",get:function(){if(!this._$){var e=this.collection.$.pipe((0,pt.p)((e=>!e.isLocal)),(0,ft.Z)(null),(0,Ct.Z)((()=>Jt(this))),(0,mt.T)((()=>this._result)),(0,yt.t)(de.bz),(0,vt.F)(((e,t)=>!(!e||e.time!==(0,de.ZN)(t).time))),(0,pt.p)((e=>!!e)),(0,mt.T)((e=>{var t=(0,de.ZN)(e);return"count"===this.op?t.count:"findOne"===this.op?0===t.documents.length?null:t.documents[0]:"findByIds"===this.op?t.docsMap:t.documents.slice(0)})));this._$=(0,It.h)(e,this.refCount$.pipe((0,pt.p)((()=>!1))))}return this._$}},{key:"$$",get:function(){return this.collection.database.getReactivityFactory().fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){this.collection.schema.jsonSchema;return l(this,"queryMatcher",Oe(0,Ee(this.collection.schema.jsonSchema,this.mangoQuery)))}},{key:"asRxQuery",get:function(){return this}}])}();function Zt(e,t,r,a){Fe("preCreateRxQuery",{op:e,queryObj:t,collection:r,other:a});var n,i,s=new Ut(e,t,r,a);return s=(n=s).collection._queryCache.getByQuery(n),i=r,Lt.has(i)||(Lt.add(i),(0,gt.dY)().then((()=>(0,gt.Ve)(200))).then((()=>{i.destroyed||i.cacheReplacementPolicy(i,i._queryCache),Lt.delete(i)}))),s}function Vt(e){var t=e.asRxQuery.collection._changeEventBuffer.counter;return e._latestChangeEvent>=t}function Jt(e){return e.collection.database.destroyed||Vt(e)?gt.Dr:(e._ensureEqualQueue=e._ensureEqualQueue.then((()=>function(e){if(e._lastEnsureEqual=(0,oe.t)(),e.collection.database.destroyed||Vt(e))return gt.Dr;var t=!1,r=!1;-1===e._latestChangeEvent&&(r=!0);if(!r){var a=e.asRxQuery.collection._changeEventBuffer.getFrom(e._latestChangeEvent+1);if(null===a)r=!0;else{e._latestChangeEvent=e.asRxQuery.collection._changeEventBuffer.counter;var n=e.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(a);if("count"===e.op){var i=(0,de.ZN)(e._result).count,s=i;n.forEach((t=>{var r=t.previousDocumentData&&e.doesDocumentDataMatch(t.previousDocumentData),a=e.doesDocumentDataMatch(t.documentData);!r&&a&&s++,r&&!a&&s--})),s!==i&&(t=!0,e._setResultData(s))}else{var o=Nt(e,n);o.runFullQueryAgain?r=!0:o.changed&&(t=!0,e._setResultData(o.newResults))}}}if(r)return e._execOverDatabase().then((r=>(e._latestChangeEvent=e.collection._changeEventBuffer.counter,"number"==typeof r?(e._result&&r===e._result.count||(t=!0,e._setResultData(r)),t):(e._result&&function(e,t,r){if(t.length!==r.length)return!1;for(var a=0,n=t.length;a<n;){var i=t[a],s=r[a];if(a++,i._rev!==s._rev||i[e]!==s[e])return!1}return!0}(e.collection.schema.primaryPath,r,e._result.docsData)||(t=!0,e._setResultData(r)),t))));return Promise.resolve(t)}(e))),e._ensureEqualQueue)}function Gt(e,t){if(!t.sort)throw R("SNH",{query:t});return{query:t,queryPlan:pe(e,t)}}var Yt="collection",Xt="storage-token",er=L({version:0,title:"RxInternalDocument",primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[Yt,Xt,"rx-migration-status","OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function tr(e,t){return q(er,{key:e,context:t})}async function rr(e){var t=Gt(e.schema,{selector:{context:Yt,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0});return(await e.query(t)).documents}var ar="storageToken",nr=tr(ar,Xt);function ir(e,t){return e+"-"+t.version}function sr(e,t){return t=function(e,t){for(var r=Object.keys(e.defaultValues),a=0;a<r.length;++a){var n=r[a];Object.prototype.hasOwnProperty.call(t,n)&&void 0!==t[n]||(t[n]=e.defaultValues[n])}return t}(e,t=s(t)),(t=function(e,t,r){if("string"==typeof t.primaryKey)return r;var a=q(t,r),n=r[e];if(n&&n!==a)throw R("DOC19",{args:{documentData:r,existingPrimary:n,newPrimary:a},schema:t});return r[e]=a,r}(e.primaryPath,e.jsonSchema,t))._meta=$(),Object.prototype.hasOwnProperty.call(t,"_deleted")||(t._deleted=!1),Object.prototype.hasOwnProperty.call(t,"_attachments")||(t._attachments={}),Object.prototype.hasOwnProperty.call(t,"_rev")||(t._rev=""),t}async function or(e,t,r,a,n,i,s){var o=(await rr(t)).filter((e=>e.data.name===n)),c=[];o.forEach((e=>{c.push({collectionName:e.data.name,schema:e.data.schema,isCollection:!0}),e.data.connectedStorages.forEach((e=>c.push({collectionName:e.collectionName,isCollection:!1,schema:e.schema})))}));var l=new Set;if(c=c.filter((e=>{var t=e.collectionName+"||"+e.schema.version;return!l.has(t)&&(l.add(t),!0)})),await Promise.all(c.map((async t=>{var s=await e.createStorageInstance({collectionName:t.collectionName,databaseInstanceToken:r,databaseName:a,multiInstance:!1,options:{},schema:t.schema,password:i,devMode:j.isDevMode()});await s.remove(),t.isCollection&&await Qe("postRemoveRxCollection",{storage:e,databaseName:a,collectionName:n})}))),s){var h=o.map((e=>{var t=Ve(e);return t._deleted=!0,t._meta.lwt=(0,oe.t)(),t._rev=qe(r,e),{previous:e,document:t}}));await t.bulkWrite(h,"rx-database-remove-collection-all")}}function cr(e){if(e.destroyed)throw R("COL21",{collection:e.name,version:e.schema.version})}var lr=function(){function e(e){this.subs=[],this.limit=100,this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.collection=e,this.subs.push(this.collection.$.pipe((0,pt.p)((e=>!e.isLocal))).subscribe((e=>this._handleChangeEvent(e))))}var t=e.prototype;return t._handleChangeEvent=function(e){for(this.counter++,this.buffer.push(e),this.eventCounterMap.set(e,this.counter);this.buffer.length>this.limit;)this.buffer.shift()},t.getArrayIndexByPointer=function(e){var t=this.buffer[0],r=this.eventCounterMap.get(t);return e<r?null:e-r},t.getFrom=function(e){var t=[],r=this.getArrayIndexByPointer(e);if(null===r)return null;for(;;){var a=this.buffer[r];if(r++,!a)return t;t.push(a)}},t.runFrom=function(e,t){var r=this.getFrom(e);if(null===r)throw new Error("out of bounds");r.forEach((e=>t(e)))},t.reduceByLastOfDoc=function(e){return e.slice(0)},t.destroy=function(){this.subs.forEach((e=>e.unsubscribe()))},e}();var hr=new WeakMap;function dr(e){var t=e.schema.getDocumentPrototype(),r=function(e){var t={};return Object.entries(e.methods).forEach((e=>{let[r,a]=e;t[r]=a})),t}(e),a={};return[t,r,kt].forEach((e=>{Object.getOwnPropertyNames(e).forEach((t=>{var r=Object.getOwnPropertyDescriptor(e,t),n=!0;(t.startsWith("_")||t.endsWith("_")||t.startsWith("$")||t.endsWith("$"))&&(n=!1),"function"==typeof r.value?Object.defineProperty(a,t,{get(){return r.value.bind(this)},enumerable:n,configurable:!1}):(r.enumerable=n,r.configurable=!1,r.writable&&(r.writable=!1),Object.defineProperty(a,t,r))}))})),a}function ur(e,t,r){var a=function(e,t,r){var a=new e(t,r);return Fe("createRxDocument",a),a}(t,e,j.deepFreezeWhenDevMode(r));return e._runHooksSync("post","create",r,a),Fe("postCreateRxDocument",a),a}var mr=function(e,t){return ht(Ze(e.newDocumentState),Ze(e.realMasterState))?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:e.realMasterState})};var pr=["pre","post"],fr=["insert","save","remove","create"],vr=!1,yr=function(){function e(e,t,r,a,n,i,s,o,c,l,h,d){void 0===n&&(n={}),void 0===i&&(i={}),void 0===s&&(s={}),void 0===o&&(o={}),void 0===c&&(c={}),void 0===l&&(l=qt),void 0===h&&(h={}),void 0===d&&(d=mr),this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=new At,this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.onRemove=[],this.database=e,this.name=t,this.schema=r,this.internalStorageInstance=a,this.instanceCreationOptions=n,this.migrationStrategies=i,this.methods=s,this.attachments=o,this.options=c,this.cacheReplacementPolicy=l,this.statics=h,this.conflictHandler=d,function(e){if(vr)return;vr=!0;var t=Object.getPrototypeOf(e);fr.forEach((e=>{pr.map((r=>{var a=r+N(e);t[a]=function(t,a){return this.addHook(r,e,t,a)}}))}))}(this.asRxCollection)}var t=e.prototype;return t.prepare=async function(){this.storageInstance=Je(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new wt(this.storageInstance,this.schema.primaryPath,((e,t)=>_t(this,e,t)),(e=>this._runHooks("post","save",e)));var e,t,r=this.database.eventBulks$.pipe((0,pt.p)((e=>e.collectionName===this.name)));this.$=r.pipe((0,Ct.Z)((e=>e.events))),this.checkpoint$=r.pipe((0,mt.T)((e=>e.checkpoint))),this._changeEventBuffer=(e=this.asRxCollection,new lr(e)),this._docCache=new Ft(this.schema.primaryPath,this.$.pipe((0,pt.p)((e=>!e.isLocal))),(e=>{var r;return t||(r=this.asRxCollection,t=i(hr,r,(()=>Dt(dr(r))))),ur(this.asRxCollection,t,e)}));var a=this.database.internalStore.changeStream().pipe((0,pt.p)((e=>{var t=this.name+"-"+this.schema.version;return!!e.events.find((e=>"collection"===e.documentData.context&&e.documentData.key===t&&"DELETE"===e.operation))}))).subscribe((async()=>{await this.destroy(),await Promise.all(this.onRemove.map((e=>e())))}));this._subs.push(a);var n=await this.database.storageToken,s=this.storageInstance.changeStream().subscribe((e=>{for(var t=new Array(e.events.length),r=e.events,a=this.name,i=j.deepFreezeWhenDevMode,s=0;s<r.length;s++){var o=r[s];t[s]={documentId:o.documentId,collectionName:a,isLocal:!1,operation:o.operation,documentData:i(o.documentData),previousDocumentData:i(o.previousDocumentData)}}var c={id:e.id,internal:!1,collectionName:this.name,storageToken:n,events:t,databaseToken:this.database.token,checkpoint:e.checkpoint,context:e.context,endTime:e.endTime,startTime:e.startTime};this.database.$emit(c)}));return this._subs.push(s),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe((e=>{this.conflictHandler(e.input,e.context).then((t=>{this.storageInstance.resolveConflictResultionTask({id:e.id,output:t})}))}))),gt.em},t.cleanup=function(e){throw cr(this),bt("cleanup")},t.migrationNeeded=function(){throw bt("migration-schema")},t.getMigrationState=function(){throw bt("migration-schema")},t.startMigration=function(e){return void 0===e&&(e=10),cr(this),this.getMigrationState().startMigration(e)},t.migratePromise=function(e){return void 0===e&&(e=10),this.getMigrationState().migratePromise(e)},t.insert=async function(e){cr(this);var t=await this.bulkInsert([e]),r=t.error[0];return Ke(this,e[this.schema.primaryPath],e,r),(0,de.ZN)(t.success[0])},t.bulkInsert=async function(e){if(cr(this),0===e.length)return{success:[],error:[]};var t,r=this.schema.primaryPath;if(this.hasHooks("pre","insert"))t=await Promise.all(e.map((e=>{var t=sr(this.schema,e);return this._runHooks("pre","insert",t).then((()=>({document:t})))})));else{t=[];for(var a=0;a<e.length;a++){var n=e[a],i=sr(this.schema,n);t[a]={document:i}}}var s=await this.storageInstance.bulkWrite(t,"rx-collection-bulk-insert"),o=Wt(this._docCache,s.success);if(this.hasHooks("post","insert")){var c=new Map;t.forEach((e=>{var t=e.document;c.set(t[r],t)})),await Promise.all(o.map((e=>this._runHooks("post","insert",c.get(e.primary),e))))}return{success:o,error:s.error}},t.bulkRemove=async function(e){cr(this);var t=this.schema.primaryPath;if(0===e.length)return{success:[],error:[]};var r=await this.findByIds(e).exec(),a=[],i=new Map;Array.from(r.values()).forEach((e=>{var t=e.toMutableJSON(!0);a.push(t),i.set(e.primary,t)})),await Promise.all(a.map((e=>{var t=e[this.schema.primaryPath];return this._runHooks("pre","remove",e,r.get(t))})));var o=a.map((e=>{var t=s(e);return t._deleted=!0,{previous:e,document:t}})),c=await this.storageInstance.bulkWrite(o,"rx-collection-bulk-remove"),l=c.success.map((e=>e[t]));return await Promise.all(l.map((e=>this._runHooks("post","remove",i.get(e),r.get(e))))),{success:l.map((e=>n(r,e))),error:c.error}},t.bulkUpsert=async function(e){cr(this);var t=[],r=new Map;e.forEach((e=>{var a=sr(this.schema,e),n=a[this.schema.primaryPath];if(!n)throw R("COL3",{primaryPath:this.schema.primaryPath,data:a,schema:this.schema.jsonSchema});r.set(n,a),t.push(a)}));var a=await this.bulkInsert(t),i=a.success.slice(0),s=[];return await Promise.all(a.error.map((async e=>{if(409!==e.status)s.push(e);else{var t=e.documentId,a=n(r,t),o=(0,de.ZN)(e.documentInDb),c=this._docCache.getCachedRxDocuments([o])[0],l=await c.incrementalModify((()=>a));i.push(l)}}))),{error:s,success:i}},t.upsert=async function(e){cr(this);var t=await this.bulkUpsert([e]);return Ke(this.asRxCollection,e[this.schema.primaryPath],e,t.error[0]),t.success[0]},t.incrementalUpsert=function(e){cr(this);var t=sr(this.schema,e),r=t[this.schema.primaryPath];if(!r)throw R("COL4",{data:e});var a=this._incrementalUpsertQueues.get(r);return a||(a=gt.em),a=a.then((()=>function(e,t,r){var a=e._docCache.getLatestDocumentDataIfExists(t);if(a)return Promise.resolve({doc:e._docCache.getCachedRxDocuments([a])[0],inserted:!1});return e.findOne(t).exec().then((t=>t?{doc:t,inserted:!1}:e.insert(r).then((e=>({doc:e,inserted:!0})))))}(this,r,t))).then((e=>e.inserted?e.doc:function(e,t){return e.incrementalModify((e=>t))}(e.doc,t))),this._incrementalUpsertQueues.set(r,a),a},t.find=function(e){if(cr(this),"string"==typeof e)throw R("COL5",{queryObj:e});return e||(e={selector:{}}),Zt("find",e,this)},t.findOne=function(e){if(cr(this),"number"==typeof e||Array.isArray(e))throw S("COL6",{queryObj:e});var t;if("string"==typeof e)t=Zt("findOne",{selector:{[this.schema.primaryPath]:e},limit:1},this);else{if(e||(e={selector:{}}),e.limit)throw R("QU6");(e=s(e)).limit=1,t=Zt("findOne",e,this)}return t},t.count=function(e){return cr(this),e||(e={selector:{}}),Zt("count",e,this)},t.findByIds=function(e){return cr(this),Zt("findByIds",{selector:{[this.schema.primaryPath]:{$in:e.slice(0)}}},this)},t.exportJSON=function(){throw bt("json-dump")},t.importJSON=function(e){throw bt("json-dump")},t.insertCRDT=function(e){throw bt("crdt")},t.addHook=function(e,t,r,a){if(void 0===a&&(a=!1),"function"!=typeof r)throw S("COL7",{key:t,when:e});if(!pr.includes(e))throw S("COL8",{key:t,when:e});if(!fr.includes(t))throw R("COL9",{key:t});if("post"===e&&"create"===t&&!0===a)throw R("COL10",{when:e,key:t,parallel:a});var n=r.bind(this),i=a?"parallel":"series";this.hooks[t]=this.hooks[t]||{},this.hooks[t][e]=this.hooks[t][e]||{series:[],parallel:[]},this.hooks[t][e][i].push(n)},t.getHooks=function(e,t){return this.hooks[t]&&this.hooks[t][e]?this.hooks[t][e]:{series:[],parallel:[]}},t.hasHooks=function(e,t){if(!this.hooks[t]||!this.hooks[t][e])return!1;var r=this.getHooks(e,t);return!!r&&(r.series.length>0||r.parallel.length>0)},t._runHooks=function(e,t,r,a){var n=this.getHooks(e,t);if(!n)return gt.em;var i=n.series.map((e=>()=>e(r,a)));return(0,gt.h$)(i).then((()=>Promise.all(n.parallel.map((e=>e(r,a))))))},t._runHooksSync=function(e,t,r,a){if(this.hasHooks(e,t)){var n=this.getHooks(e,t);n&&n.series.forEach((e=>e(r,a)))}},t.promiseWait=function(e){return new Promise((t=>{var r=setTimeout((()=>{this.timeouts.delete(r),t()}),e);this.timeouts.add(r)}))},t.destroy=async function(){return this.destroyed?gt.Dr:(await Promise.all(this.onDestroy.map((e=>e()))),this.destroyed=!0,Array.from(this.timeouts).forEach((e=>clearTimeout(e))),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then((()=>this.storageInstance.close())).then((()=>(this._subs.forEach((e=>e.unsubscribe())),delete this.database.collections[this.name],Qe("postDestroyRxCollection",this).then((()=>!0))))))},t.remove=async function(){await this.destroy(),await Promise.all(this.onRemove.map((e=>e()))),await or(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)},(0,b.A)(e,[{key:"insert$",get:function(){return this.$.pipe((0,pt.p)((e=>"INSERT"===e.operation)))}},{key:"update$",get:function(){return this.$.pipe((0,pt.p)((e=>"UPDATE"===e.operation)))}},{key:"remove$",get:function(){return this.$.pipe((0,pt.p)((e=>"DELETE"===e.operation)))}},{key:"asRxCollection",get:function(){return this}}])}();var gr=r(7635),br=r(5525),xr=new Set,wr=function(){function e(e,t,r,a,n,i,s,o,c,l,h,d,u){void 0===s&&(s=!1),void 0===o&&(o={}),this.idleQueue=new gr.G,this.rxdbVersion=ct,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.states={},this.eventBulks$=new se.B,this.observable$=this.eventBulks$.pipe((0,Ct.Z)((e=>e.events))),this.storageToken=gt.Dr,this.storageTokenDocument=gt.Dr,this.emittedEventBulkIds=new br.p4(6e4),this.name=e,this.token=t,this.storage=r,this.instanceCreationOptions=a,this.password=n,this.multiInstance=i,this.eventReduce=s,this.options=o,this.internalStore=c,this.hashFunction=l,this.cleanupPolicy=h,this.allowSlowCount=d,this.reactivity=u,"pseudoInstance"!==this.name&&(this.internalStore=Je(this.asRxDatabase,c,er),this.storageTokenDocument=async function(e){var t=O(10),r=e.password?await e.hashFunction(JSON.stringify(e.password)):void 0,a={id:nr,context:Xt,key:ar,data:{rxdbVersion:e.rxdbVersion,token:t,instanceToken:e.token,passwordHash:r},_deleted:!1,_meta:$(),_rev:"",_attachments:{}},n=await e.internalStore.bulkWrite([{document:a}],"internal-add-storage-token");if(n.success[0])return n.success[0];var i=(0,de.ZN)(n.error[0]);if(i.isError&&I(i)){var s=i;if(c=s.documentInDb.data.rxdbVersion,l=e.rxdbVersion,!c||l.includes("beta")&&l!==c||c.split(".")[0]!==l.split(".")[0])throw R("DM5",{args:{database:e.name,databaseStateVersion:s.documentInDb.data.rxdbVersion,codeVersion:e.rxdbVersion}});if(r&&r!==s.documentInDb.data.passwordHash)throw R("DB1",{passwordHash:r,existingPasswordHash:s.documentInDb.data.passwordHash});var o=s.documentInDb;return(0,de.ZN)(o)}var c,l;throw i}(this.asRxDatabase).catch((e=>this.startupErrors.push(e))),this.storageToken=this.storageTokenDocument.then((e=>e.data.token)).catch((e=>this.startupErrors.push(e))))}var t=e.prototype;return t.getReactivityFactory=function(){if(!this.reactivity)throw R("DB14",{database:this.name});return this.reactivity},t.$emit=function(e){this.emittedEventBulkIds.has(e.id)||(this.emittedEventBulkIds.add(e.id),this.eventBulks$.next(e))},t.removeCollectionDoc=async function(e,t){var r=await He(this.internalStore,tr(ir(e,t),Yt));if(!r)throw R("SNH",{name:e,schema:t});var a=Ve(r);a._deleted=!0,await this.internalStore.bulkWrite([{document:a,previous:r}],"rx-database-remove-collection")},t.addCollections=async function(e){var t={},r={},a=[],n={};await Promise.all(Object.entries(e).map((async e=>{let[i,o]=e;var c=i,l=o.schema;t[c]=l;var h=ut(l,this.hashFunction);if(r[c]=h,this.collections[i])throw R("DB3",{name:i});var d=ir(i,l),u={id:tr(d,Yt),key:d,context:Yt,data:{name:c,schemaHash:await h.hash,schema:h.jsonSchema,version:h.version,connectedStorages:[]},_deleted:!1,_meta:$(),_rev:"",_attachments:{}};a.push({document:u});var m=Object.assign({},o,{name:c,schema:h,database:this}),p=s(o);p.database=this,p.name=i,Fe("preCreateRxCollection",p),m.conflictHandler=p.conflictHandler,n[c]=m})));var i=await this.internalStore.bulkWrite(a,"rx-database-add-collection");await async function(e){if(await e.storageToken,e.startupErrors[0])throw e.startupErrors[0]}(this),await Promise.all(i.error.map((async e=>{if(409!==e.status)throw R("DB12",{database:this.name,writeError:e});var a=(0,de.ZN)(e.documentInDb),n=a.data.name,i=r[n];if(a.data.schemaHash!==await i.hash)throw R("DB6",{database:this.name,collection:n,previousSchemaHash:a.data.schemaHash,schemaHash:await i.hash,previousSchema:a.data.schema,schema:(0,de.ZN)(t[n])})})));var o={};return await Promise.all(Object.keys(e).map((async e=>{var t=n[e],r=await function(e){let{database:t,name:r,schema:a,instanceCreationOptions:n={},migrationStrategies:i={},autoMigrate:s=!0,statics:o={},methods:c={},attachments:l={},options:h={},localDocuments:d=!1,cacheReplacementPolicy:u=qt,conflictHandler:m=mr}=e;var p={databaseInstanceToken:t.token,databaseName:t.name,collectionName:r,schema:a.jsonSchema,options:n,multiInstance:t.multiInstance,password:t.password,devMode:j.isDevMode()};return Fe("preCreateRxStorageInstance",p),async function(e,t){return t.multiInstance=e.multiInstance,await e.storage.createStorageInstance(t)}(t,p).then((e=>{var p=new yr(t,r,a,e,n,i,c,l,h,u,o,m);return p.prepare().then((()=>{Object.entries(o).forEach((e=>{let[t,r]=e;Object.defineProperty(p,t,{get:()=>r.bind(p)})}));var e=gt.em;return s&&0!==p.schema.version&&(e=p.migratePromise()),e})).then((()=>(Fe("createRxCollection",{collection:p,creator:{name:r,schema:a,storageInstance:e,instanceCreationOptions:n,migrationStrategies:i,methods:c,attachments:l,options:h,cacheReplacementPolicy:u,localDocuments:d,statics:o}}),p))).catch((t=>e.close().then((()=>Promise.reject(t)))))}))}(t);o[e]=r,this.collections[e]=r,this[e]||Object.defineProperty(this,e,{get:()=>this.collections[e]})}))),o},t.lockedRun=function(e){return this.idleQueue.wrapCall(e)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(e){throw bt("json-dump")},t.addState=function(e){throw bt("state")},t.importJSON=function(e){throw bt("json-dump")},t.backup=function(e){throw bt("backup")},t.leaderElector=function(){throw bt("leader-election")},t.isLeader=function(){throw bt("leader-election")},t.waitForLeadership=function(){throw bt("leader-election")},t.migrationStates=function(){throw bt("migration-schema")},t.destroy=async function(){return this.destroyed?gt.Dr:(this.destroyed=!0,await Qe("preDestroyRxDatabase",this),this.eventBulks$.complete(),this._subs.map((e=>e.unsubscribe())),"pseudoInstance"===this.name?gt.Dr:this.requestIdlePromise().then((()=>Promise.all(this.onDestroy.map((e=>e()))))).then((()=>Promise.all(Object.keys(this.collections).map((e=>this.collections[e])).map((e=>e.destroy()))))).then((()=>this.internalStore.close())).then((()=>xr.delete(this.storage.name+"|"+this.name))).then((()=>!0)))},t.remove=function(){return this.destroy().then((()=>async function(e,t,r){var a=O(10),n=await jr(a,t,e,{},!1,r),i=await rr(n),s=new Set;i.forEach((e=>s.add(e.data.name)));var o=Array.from(s);return await Promise.all(o.map((i=>or(t,n,a,e,i,r)))),await Qe("postRemoveRxDatabase",{databaseName:e,storage:t}),await n.remove(),o}(this.name,this.storage,this.password)))},(0,b.A)(e,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();async function jr(e,t,r,a,n,i){return await t.createStorageInstance({databaseInstanceToken:e,databaseName:r,collectionName:We,schema:er,options:a,multiInstance:n,password:i,devMode:j.isDevMode()})}function kr(e){let{storage:t,instanceCreationOptions:r,name:a,password:n,multiInstance:i=!0,eventReduce:s=!0,ignoreDuplicate:o=!1,options:c={},cleanupPolicy:l,allowSlowCount:h=!1,localDocuments:d=!1,hashFunction:u=he,reactivity:m}=e;Fe("preCreateRxDatabase",{storage:t,instanceCreationOptions:r,name:a,password:n,multiInstance:i,eventReduce:s,ignoreDuplicate:o,options:c,localDocuments:d}),o||function(e,t){var r=t.name+"|"+e;if(xr.has(r))throw R("DB8",{name:e,storage:t.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}(a,t),xr.add(t.name+"|"+a);var p=O(10);return jr(p,t,a,r,i,n).catch((e=>{throw xr.delete(t.name+"|"+a),e})).then((e=>{var f=new wr(a,p,t,r,n,i,s,c,e,u,l,h,m);return Qe("createRxDatabase",{database:f,creator:{storage:t,instanceCreationOptions:r,name:a,password:n,multiInstance:i,eventReduce:s,ignoreDuplicate:o,options:c,localDocuments:d}}).then((()=>f))}))}var Dr={RxSchema:dt.prototype,RxDocument:kt,RxQuery:Ut.prototype,RxCollection:yr.prototype,RxDatabase:wr.prototype},_r=new Set,Rr=new Set;var Sr=function(e){function t(t,r,a){var n;return(n=e.call(this,null,r)||this).id=t,n.parent=a,n}return(0,x.A)(t,e),t}(Dt()),Ir={get isLocal(){return!0},get allAttachments$(){throw R("LD1",{document:this})},get primaryPath(){return"id"},get primary(){return this.id},get $(){var e=n(Nr,this.parent);return this.parent.$.pipe((0,pt.p)((e=>e.documentId===this.primary)),(0,pt.p)((e=>e.isLocal)),(0,mt.T)((e=>xt(e))),(0,ft.Z)(e.docCache.getLatestDocumentData(this.primary)),(0,vt.F)(((e,t)=>e._rev===t._rev)),(0,mt.T)((t=>e.docCache.getCachedRxDocument(t))),(0,yt.t)(de.bz))},get $$(){var e=this,t=Pr(e);return t.getReactivityFactory().fromObservable(e.$,e.getLatest()._data,t)},get deleted$$(){var e=this,t=Pr(e);return t.getReactivityFactory().fromObservable(e.deleted$,e.getLatest().deleted,t)},getLatest(){var e=n(Nr,this.parent),t=e.docCache.getLatestDocumentData(this.primary);return e.docCache.getCachedRxDocument(t)},get(e){if(e="data."+e,this._data){if("string"!=typeof e)throw S("LD2",{objPath:e});var t=v(this._data,e);return t=j.deepFreezeWhenDevMode(t)}},get$(e){if(e="data."+e,j.isDevMode()){if(e.includes(".item."))throw R("LD3",{objPath:e});if(e===this.primaryPath)throw R("LD4")}return this.$.pipe((0,mt.T)((e=>e._data)),(0,mt.T)((t=>v(t,e))),(0,vt.F)())},get$$(e){var t=Pr(this);return t.getReactivityFactory().fromObservable(this.get$(e),this.getLatest().get(e),t)},async incrementalModify(e){var t=await Br(this.parent);return t.incrementalWriteQueue.addWrite(this._data,(async t=>(t.data=await e(t.data,this),t))).then((e=>t.docCache.getCachedRxDocument(e)))},incrementalPatch(e){return this.incrementalModify((t=>(Object.entries(e).forEach((e=>{let[r,a]=e;t[r]=a})),t)))},async _saveData(e){var t=await Br(this.parent),r=this._data;return e.id=this.id,t.storageInstance.bulkWrite([{previous:r,document:e}],"local-document-save-data").then((t=>{var r=t.success[0];if(!r)throw t.error[0];(e=s(e))._rev=r._rev}))},async remove(){var e=await Br(this.parent),t=s(this._data);return t._deleted=!0,ze(e.storageInstance,{previous:this._data,document:t},"local-document-remove").then((t=>e.docCache.getCachedRxDocument(t)))}},Cr=!1,Er=()=>{if(!Cr){Cr=!0;var e=kt;Object.getOwnPropertyNames(e).forEach((t=>{if(!Object.getOwnPropertyDescriptor(Ir,t)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(Ir,t,r)}}));["populate","update","putAttachment","getAttachment","allAttachments"].forEach((e=>Ir[e]=(e=>()=>{throw R("LD6",{functionName:e})})(e)))}};function Pr(e){var t=e.parent;return t instanceof wr?t:t.database}var Or=new WeakMap,Nr=new WeakMap;function Ar(e){var t=e.database?e.database:e,r=e.database?e.name:"",a=(async()=>{var a=await $r(t.token,t.storage,t.name,r,t.instanceCreationOptions,t.multiInstance);a=Je(t,a,Lr);var n=new Ft("id",e.$.pipe((0,pt.p)((e=>e.isLocal))),(t=>function(e,t){Er();var r=new Sr(e.id,e,t);return Object.setPrototypeOf(r,Ir),r.prototype=Ir,r}(t,e))),i=new wt(a,"id",(()=>{}),(()=>{})),s=await t.storageToken,o=a.changeStream().subscribe((r=>{for(var a=new Array(r.events.length),n=r.events,i=e.database?e.name:void 0,o=0;o<n.length;o++){var c=n[o];a[o]={documentId:c.documentId,collectionName:i,isLocal:!0,operation:c.operation,documentData:j.deepFreezeWhenDevMode(c.documentData),previousDocumentData:j.deepFreezeWhenDevMode(c.previousDocumentData)}}var l={id:r.id,internal:!1,collectionName:e.database?e.name:void 0,storageToken:s,events:a,databaseToken:t.token,checkpoint:r.checkpoint,context:r.context,endTime:r.endTime,startTime:r.startTime};t.$emit(l)}));e._subs.push(o);var c={database:t,parent:e,storageInstance:a,docCache:n,incrementalWriteQueue:i};return Nr.set(e,c),c})();Or.set(e,a)}function Br(e){var t=Or.get(e);if(!t){var r=e.database?e.database:e,a=e.database?e.name:"";throw R("LD8",{database:r.name,collection:a})}return t}function $r(e,t,r,a,n,i){return t.createStorageInstance({databaseInstanceToken:e,databaseName:r,collectionName:qr(a),schema:Lr,options:n,multiInstance:i,devMode:j.isDevMode()})}function Mr(e){var t=Or.get(e);if(t)return Or.delete(e),t.then((e=>e.storageInstance.close()))}async function Tr(e,t,r){var a=O(10),n=await $r(a,e,t,r,{},!1);await n.remove()}function qr(e){return"plugin-local-documents-"+e}var Lr=L({title:"RxLocalDocument",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:128},data:{type:"object",additionalProperties:!0}},required:["id","data"]});async function Fr(e,t){var r=await Br(this),a={id:e,data:t,_deleted:!1,_meta:$(),_rev:"",_attachments:{}};return ze(r.storageInstance,{document:a},"local-document-insert").then((e=>r.docCache.getCachedRxDocument(e)))}function Qr(e,t){return this.getLocal(e).then((r=>r?r.incrementalModify((()=>t)):this.insertLocal(e,t)))}async function Wr(e){var t=await Br(this),r=t.docCache,a=r.getLatestDocumentDataIfExists(e);return a?Promise.resolve(r.getCachedRxDocument(a)):He(t.storageInstance,e).then((e=>e?t.docCache.getCachedRxDocument(e):null))}function Hr(e){return this.$.pipe((0,ft.Z)(null),(0,Ct.Z)((async t=>t?{changeEvent:t}:{doc:await this.getLocal(e)})),(0,Ct.Z)((async t=>{if(t.changeEvent){var r=t.changeEvent;return r.isLocal&&r.documentId===e?{use:!0,doc:await this.getLocal(e)}:{use:!1}}return{use:!0,doc:t.doc}})),(0,pt.p)((e=>e.use)),(0,mt.T)((e=>e.doc)))}var zr={name:"local-documents",rxdb:!0,prototypes:{RxCollection:e=>{e.insertLocal=Fr,e.upsertLocal=Qr,e.getLocal=Wr,e.getLocal$=Hr},RxDatabase:e=>{e.insertLocal=Fr,e.upsertLocal=Qr,e.getLocal=Wr,e.getLocal$=Hr}},hooks:{createRxDatabase:{before:e=>{e.creator.localDocuments&&Ar(e.database)}},createRxCollection:{before:e=>{e.creator.localDocuments&&Ar(e.collection)}},preDestroyRxDatabase:{after:e=>Mr(e)},postDestroyRxCollection:{after:e=>Mr(e)},postRemoveRxDatabase:{after:e=>Tr(e.storage,e.databaseName,"")},postRemoveRxCollection:{after:e=>Tr(e.storage,e.databaseName,e.collectionName)}},overwritable:{}};let Kr;function Ur(){return"undefined"!=typeof window&&window.indexedDB}function Zr(){return Kr||(Kr=(async()=>{!function(e){if(Fe("preAddRxPlugin",{plugin:e,plugins:_r}),!_r.has(e)){if(Rr.has(e.name))throw R("PL3",{name:e.name,plugin:e});if(_r.add(e),Rr.add(e.name),!e.rxdb)throw S("PL1",{plugin:e});e.init&&e.init(),e.prototypes&&Object.entries(e.prototypes).forEach((e=>{let[t,r]=e;return r(Dr[t])})),e.overwritable&&Object.assign(j,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach((e=>{let[t,r]=e;r.after&&Le[t].push(r.after),r.before&&Le[t].unshift(r.before)}))}}(zr);var e;return await kr({name:"rxdb-landing-v3",localDocuments:!0,storage:(void 0===e&&(e={}),new lt(e))})})()),Kr}const Vr=["#e6008d","#8d2089","#5f2688"]},1527:(e,t,r)=>{function a(e,t){if(!window.trigger)throw new Error("window.trigger not defined");return window.trigger(e,t)}r.d(t,{h:()=>a})},1980:(e,t,r)=>{r.r(t),r.d(t,{FORM_VALUE_DOCUMENT_ID:()=>g,default:()=>b});var a=r(4586),n=r(4043),i=r(5260),s=r(6540),o=r(3337),c=r(7810),l=r(7849);const h=[{name:"Antigua and Barbuda",code:"AG",salary:49527},{name:"Argentina",code:"AR",salary:17158},{name:"Australia",code:"AU",salary:76036},{name:"Austria",code:"AT",salary:59383},{name:"Bahamas",code:"BS",salary:62024},{name:"Belarus",code:"BY",salary:5749},{name:"Belgium",code:"BE",salary:63749},{name:"Bermuda",code:"BM",salary:86590},{name:"Bosnia and Herzegovina",code:"BA",salary:11992},{name:"Brazil",code:"BR",salary:26464},{name:"Bulgaria",code:"BG",salary:23384},{name:"Cambodia",code:"KH",salary:18e3},{name:"Canada",code:"CA",salary:71554},{name:"Chile",code:"CL",salary:31073},{name:"China",code:"CN",salary:40611},{name:"Colombia",code:"CO",salary:12894},{name:"Costa Rica",code:"CR",salary:40256},{name:"Croatia",code:"HR",salary:22566},{name:"Czech Republic",code:"CZ",salary:33760},{name:"Denmark",code:"DK",salary:68778},{name:"Ecuador",code:"EC",salary:35016},{name:"Egypt",code:"EG",salary:7758},{name:"Estonia",code:"EE",salary:26728},{name:"Finland",code:"FI",salary:64198},{name:"France",code:"FR",salary:58137},{name:"Georgia",code:"GE",salary:40315},{name:"Germany",code:"DE",salary:72138},{name:"Greece",code:"GR",salary:36824},{name:"Guatemala",code:"GT",salary:49612},{name:"Holy See (Vatican City State)",code:"VA",salary:51474},{name:"Hong Kong",code:"HK",salary:71970},{name:"Hungary",code:"HU",salary:22341},{name:"Iceland",code:"IS",salary:66512},{name:"India",code:"IN",salary:35420},{name:"Indonesia",code:"ID",salary:20978},{name:"Iraq",code:"IQ",salary:21029},{name:"Ireland",code:"IE",salary:66281},{name:"Israel",code:"IL",salary:57466},{name:"Italy",code:"IT",salary:50900},{name:"Jamaica",code:"JM",salary:21048},{name:"Japan",code:"JP",salary:57793},{name:"Kazakhstan",code:"KZ",salary:12243},{name:"Republic of Korea",code:"KR",salary:45957},{name:"Latvia",code:"LV",salary:26728},{name:"Luxembourg",code:"LU",salary:84663},{name:"Malaysia",code:"MY",salary:26117},{name:"Malta",code:"MT",salary:41971},{name:"Mexico",code:"MX",salary:24050},{name:"Morocco",code:"MA",salary:17903},{name:"Netherlands",code:"NL",salary:62661},{name:"New Zealand",code:"NZ",salary:63948},{name:"Norway",code:"NO",salary:69498},{name:"Pakistan",code:"PK",salary:9066},{name:"Panama",code:"PA",salary:39143},{name:"Peru",code:"PE",salary:17469},{name:"Philippines",code:"PH",salary:11088},{name:"Poland",code:"PL",salary:30236},{name:"Portugal",code:"PT",salary:37959},{name:"Romania",code:"RO",salary:22319},{name:"Russian Federation",code:"RU",salary:20492},{name:"Saudi Arabia",code:"SA",salary:47336},{name:"Singapore",code:"SG",salary:66023},{name:"Slovakia",code:"SK",salary:29650},{name:"South Africa",code:"ZA",salary:40336},{name:"Spain",code:"ES",salary:47819},{name:"Sweden",code:"SE",salary:49361},{name:"Switzerland",code:"CH",salary:92820},{name:"Taiwan",code:"TW",salary:47737},{name:"Thailand",code:"TH",salary:21772},{name:"Turkey",code:"TR",salary:8788},{name:"Ukraine",code:"UA",salary:14139},{name:"United Arab Emirates",code:"AE",salary:66381},{name:"United Kingdom",code:"GB",salary:61188},{name:"United States",code:"US",salary:91935},{name:"Uruguay",code:"UY",salary:23754},{name:"Vietnam",code:"VN",salary:19058}],d={browser:.4,native:.4,performance:.35,server:.25,sourcecode:0,perpetual:0},u=.05;var m=r(1527),p=r(574),f=r(2303),v=r(6902),y=r(4848);const g="premium-price-form-value";function b(){const{siteConfig:e}=(0,a.A)(),t=(0,f.A)(),[r,l]=s.useState(null),[b,j]=s.useState(null),[k,D]=s.useState(!1);(0,s.useEffect)((()=>{t&&(0,p.IA)()&&(k||(t&&window.trigger("open_pricing_page",1),(async()=>{const e=await(0,p.C3)(),t=await e.getLocal(g);if(t){console.log("formValueDoc:"),console.dir(t),j(t._data.data.homeCountry),l(t._data.data.homeCountry),x("company-size",t._data.data.companySize),x("project-amount",t._data.data.projectAmount),x("license-period",t._data.data.licensePeriod),Object.keys(d).forEach((e=>{x("package-"+e,!1)})),t._data.data.packages.forEach((e=>{x("package-"+e,!0)}));const e=document.getElementById("price-calculator-submit");e&&e.click()}D(!0)})()))}));const[_,R]=s.useState(!1);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(i.A,{children:(0,y.jsx)("body",{className:"homepage"})}),(0,y.jsx)(n.A,{title:`Premium Plugins - ${e.title}`,description:"RxDB plugins for professionals. FAQ, pricing and license",children:(0,y.jsxs)("main",{children:[(0,y.jsx)("div",{className:"block first",id:"price-calculator-block",children:(0,y.jsxs)("div",{className:"content centered",children:[(0,y.jsxs)("h2",{children:["RxDB Premium ",(0,y.jsx)("b",{className:"underline",children:"Price Calculator"})]}),(0,y.jsxs)("p",{style:{width:"80%"},children:["RxDB's Premium plugins offer advanced features and optimizations that enhance application ",(0,y.jsx)("b",{children:"performance"})," ","and are backed by dedicated support and regular updates. Using the premium plugins is recommended for users that use RxDB in a professional context."]}),(0,y.jsx)("div",{className:"price-calculator",children:(0,y.jsx)("div",{className:"price-calculator-inner",children:(0,y.jsxs)("form",{id:"price-calculator-form",children:[(0,y.jsxs)("div",{className:"field",children:[(0,y.jsx)("label",{htmlFor:"home-country",children:"Company Home Country:"}),(0,y.jsx)("div",{className:"input",children:(0,y.jsx)(v.A,{id:"home-country",style:{width:"100%"},popupMatchSelectWidth:!0,optionFilterProp:"value",showSearch:!0,placeholder:"Company Home Country",value:r||b,onChange:e=>{e!==r&&l(e)},children:h.sort(((e,t)=>e.name>=t.name?1:-1)).map(((e,t)=>(0,y.jsx)(v.A.Option,{value:e.name,children:e.name},t)))})})]}),(0,y.jsx)("br",{}),(0,y.jsx)("div",{className:"clear"}),(0,y.jsxs)("div",{className:"field",children:[(0,y.jsx)("label",{htmlFor:"company-size",children:"Company Size:"}),(0,y.jsxs)("div",{className:"input",children:[(0,y.jsx)("input",{type:"number",name:"company-size",min:1,max:1e6,required:!0,onKeyDown:()=>{const e=(0,o.ZN)(event);return 69!==e.keyCode&&189!==e.keyCode&&190!==e.keyCode},placeholder:"Company Size"}),(0,y.jsx)("div",{className:"suffix",children:"employee(s)"})]})]}),(0,y.jsxs)("div",{className:"packages",children:[(0,y.jsx)("h3",{children:"Packages:"}),(0,y.jsx)("div",{className:"package bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"package-inner",children:[(0,y.jsx)("input",{name:"package-browser",type:"checkbox",className:"package-checkbox",defaultChecked:!0}),(0,y.jsx)("h4",{children:"Browser Package"}),(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/rx-storage-opfs.html",target:"_blank",children:"RxStorage OPFS"})}),(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/rx-storage-indexeddb.html",target:"_blank",children:"RxStorage IndexedDB"})}),(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/rx-storage-worker.html",target:"_blank",children:"RxStorage Worker"})}),(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/encryption.html",target:"_blank",children:"WebCrypto Encryption"})})]})]})}),(0,y.jsx)("div",{className:"package bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"package-inner",children:[(0,y.jsx)("input",{name:"package-native",type:"checkbox",className:"package-checkbox",defaultChecked:!0}),(0,y.jsx)("h4",{children:"Native Package"}),(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/rx-storage-sqlite.html",target:"_blank",children:"RxStorage SQLite"})}),(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/rx-storage-filesystem-node.html",target:"_blank",children:"RxStorage Filesystem Node"})})]})]})}),(0,y.jsx)("div",{className:"package bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"package-inner",children:[(0,y.jsx)("input",{name:"package-performance",type:"checkbox",className:"package-checkbox",defaultChecked:!0}),(0,y.jsx)("h4",{children:"Performance Package"}),(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/rx-storage-sharding.html",target:"_blank",children:"RxStorage Sharding"})}),(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/rx-storage-memory-mapped.html",target:"_blank",children:"RxStorage Memory Mapped"})}),(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/rx-storage-memory-synced.html",target:"_blank",children:"RxStorage Memory Synced"})}),(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/query-optimizer.html",target:"_blank",children:"Query Optimizer"})}),(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/rx-storage-localstorage-meta-optimizer.html",target:"_blank",children:"RxStorage Localstorage Meta Optimizer"})}),(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/rx-storage-shared-worker.html",target:"_blank",children:"RxStorage Shared Worker"})})]})]})}),(0,y.jsx)("div",{className:"package bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"package-inner",children:[(0,y.jsx)("input",{name:"package-server",type:"checkbox",className:"package-checkbox",defaultChecked:!0}),(0,y.jsx)("h4",{children:"Server Package"}),(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/rx-server.html",target:"_blank",children:"RxServer Adapter Fastify"})}),(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/rx-server.html",target:"_blank",children:"RxServer Adapter Koa"})})]})]})}),(0,y.jsx)("div",{className:"package bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"package-inner",children:[(0,y.jsx)("input",{name:"package-utilities",type:"checkbox",className:"package-checkbox",defaultChecked:!0,disabled:!0}),(0,y.jsxs)("h4",{children:["Utilities Package ",(0,y.jsx)("b",{children:"always included"})]}),(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/logger.html",target:"_blank",children:"Logger"})}),(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/reactivity.html",target:"_blank",children:"Reactivity Vue"})}),(0,y.jsx)("li",{children:(0,y.jsx)("a",{href:"/reactivity.html",target:"_blank",children:"Reactivity Preact Signals"})})]})]})}),(0,y.jsx)("div",{className:"clear"}),(0,y.jsx)("div",{className:"clear"})]}),(0,y.jsx)("div",{className:"button",id:"price-calculator-submit",onClick:async()=>{(0,m.h)("calculate_premium_price",3);const e=(0,o.ZN)(document.getElementById("price-calculator-form"));if(!e.reportValidity())return void console.log("form not valid");const a=new FormData(e),n=Object.fromEntries(a.entries());if(console.log("formData:"),console.dir(n),console.dir(r),!r&&k&&t)return void alert("Please fill out the Home Country Field");if(!r)return;const i=h.find((e=>e.name.toLowerCase()===r.toLowerCase()));if(!i)return;const s=Object.entries(n).filter((e=>{let[t,r]=e;return t.startsWith("package-")})).map((e=>{let[t]=e;return(0,c.dG)(t.split("-"))})),l={companySize:parseInt(n["company-size"],10),teamSize:n["developer-count"],projectAmount:"1",licensePeriod:1,homeCountryCode:i.code,packages:s},f=function(e){if(console.log("calculatePrice:"),console.dir(e),"number"!=typeof e.licensePeriod)throw new Error("not a number "+typeof e.licensePeriod);const t=(0,o.ZN)(h.find((t=>t.code===e.homeCountryCode))).salary;let r=0;e.packages.forEach((e=>{const t=d[e];r+=t})),console.log("aimInPercent: "+r);let a=350+1.4*t*(r/100);if(2===e.packages.length?a*=.95:e.packages.length>2&&(a*=.9),e.companySize>1){let t=1+Math.pow(1*e.companySize-1,.45)/100*4.5;const r=6;t>r&&(t=r),console.log("input.companySize "+e.companySize+" - "+t),a*=t}if(e.packages.includes("sourcecode")){a*=1.75;const e=1520;a<e&&(a=e)}const n=(new Date).getFullYear()-2022,i=Math.pow(1+u,n);console.log("inflationMultiplier: "+i),a*=i,"2"===e.projectAmount?a*=1.6:"infinity"===e.projectAmount&&(a*=3),a=Math.ceil(a)*e.licensePeriod,2===e.licensePeriod?a*=.9:3===e.licensePeriod&&(a*=.8),e.packages.includes("perpetual")&&(a+=a/e.licensePeriod*.45);return a=Math.ceil(a),a=a>1200?100*Math.floor(a/100):50*Math.floor(a/50),{totalPrice:a}}(l);console.log("priceResult:"),console.log(JSON.stringify(f,null,4));const v=(0,o.ZN)(document.getElementById("price-calculator-result")),y=(0,o.ZN)(document.getElementById("total-per-project-per-month")),b=(e,t)=>{console.log("setPrice:"),console.dir(t),e.innerHTML=Math.ceil(t).toString()},x=f.totalPrice/l.licensePeriod;b(y,"infinity"!==l.projectAmount?x/parseInt(l.projectAmount,10)/12:0);const w=await(0,p.C3)();await w.upsertLocal(g,{companySize:n["company-size"],projectAmount:n["project-amount"],licensePeriod:n["license-period"],homeCountry:i.name,packages:s,price:f.totalPrice,formSubmitted:!1}),v.style.display="block"},children:"Estimate Price"})]})})}),(0,y.jsx)("div",{className:"price-calculator",id:"price-calculator-result",style:{marginBottom:90,display:"none"},children:(0,y.jsxs)("div",{className:"price-calculator-inner",children:[(0,y.jsx)("h4",{children:"Estimated Price:"}),(0,y.jsx)("br",{}),(0,y.jsxs)("div",{className:"inner",children:[(0,y.jsx)("span",{className:"price-label",children:"\u20ac"}),(0,y.jsx)("span",{id:"total-per-project-per-month",children:"84"}),(0,y.jsx)("span",{className:"per-month",children:"/month"}),(0,y.jsx)("span",{className:"clear"})]}),(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),(0,y.jsx)("div",{className:"clear"}),(0,y.jsx)("div",{className:"button",onClick:()=>{(0,m.h)("open_premium_submit_popup",20),R(!0)},children:"Buy Now \xbb"}),(0,y.jsx)("div",{className:"clear"})]})})]})}),(0,y.jsx)("div",{className:"block dark",id:"faq",children:(0,y.jsxs)("div",{className:"content centered premium-faq",children:[(0,y.jsxs)("h2",{children:["F.A.Q. ",(0,y.jsx)("b",{children:"(click to toggle)"})]}),(0,y.jsxs)("details",{children:[(0,y.jsx)("summary",{children:"Do I need the Premium Plugins?"}),"RxDB Core is open source and many use cases can be implemented with the Open Core part of RxDB. There are many"," ",(0,y.jsx)("a",{href:"/rx-storage.html",target:"_blank",children:"RxStorage"})," ","options and all core plugins that are required for replication, schema validation, encryption and so on, are totally free. As soon as your application is more then a side project you can consider using the premium plugins as an easy way to improve your applications performance and reduce the build size.",(0,y.jsx)("br",{}),"The main benefit of the Premium Plugins is ",(0,y.jsx)("b",{children:"performance"}),". The Premium RxStorage implementations have a better performance so reading and writing data is much faster especially on low-end devices. You can find a performance comparison"," ",(0,y.jsx)("a",{href:"/rx-storage-performance.html",target:"_blank",children:"here"}),". Also there are additional Premium Plugins that can be used to further optimize the performance of your application like the"," ",(0,y.jsx)("a",{href:"/query-optimizer.html",target:"_blank",children:"Query Optimizer"})," ","or the"," ",(0,y.jsx)("a",{href:"/rx-storage-sharding.html",target:"_blank",children:"Sharding"})," ","plugin."]}),(0,y.jsxs)("details",{children:[(0,y.jsx)("summary",{children:"Why is it not for free?"}),"The development of RxDB started in 2016 and after all these years it became clear that big implementation and improvement steps will not be done by the RxDB community. While the community submits valuable pull requests, they are mostly small improvements or bugfixes for specific edge case. Big rewrites and optimizations that require a big effort have only be done by the RxDB maintainer.",(0,y.jsx)("br",{}),"Selling RxDB Premium ensures that there will be always an incentive for someone to add features, keep everything up to date and to further improve and optimize the codebase. This gives the user the confidence that RxDB is a ",(0,y.jsx)("b",{children:"future proof"})," tech stack to build on which lets RxDB stand out compared to similar technologies."]}),(0,y.jsxs)("details",{children:[(0,y.jsx)("summary",{children:"Why is there no free trial period?"}),(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:"RxDB is written in JavaScript and the code of the Premium Plugins does not contain any tracking or measurement code that would send information from your application to our servers in production mode. As soon as someone has the code on his computer, the maintainer has no chance to really ensure that after a free trial period the code is no longer used and deleted."}),(0,y.jsxs)("li",{children:["Before you can use the Premium Plugins you have to debate and sign a license agreement with the maintainer. This is a sophisticated process that creates overhead which distracts the maintainer from writing RxDB code. So handling trial period users is just not manageable. For this reason there is also no monthly subscriptions. Premium access must be paid ",(0,y.jsx)("b",{children:"per year"}),"."]})]})]}),(0,y.jsxs)("details",{children:[(0,y.jsx)("summary",{children:"Why is it not cheaper?"}),"The price of the Premium Plugins is chosen in way that ensures that there can be always one person that develops RxDB ",(0,y.jsx)("b",{children:"full time"}),". Compared to other JavaScript frameworks and developer tools, RxDB satisfies an edge use case for people that want to store data inside of their application on the users device. Most web developers do not need to do that and rely on the traditional client-server stack. So RxDB cannot be sold to that many people which increases the price."]}),(0,y.jsxs)("details",{children:[(0,y.jsx)("summary",{children:"Can I install/build the premium plugins in my CI?"}),(0,y.jsx)("b",{children:"Yes"})," you can safely install and use the Premium Plugins in your CI without additional payment."]}),(0,y.jsxs)("details",{children:[(0,y.jsx)("summary",{children:"Which payment methods are accepted?"}),(0,y.jsx)("b",{children:"Stripe.com"})," is used as payment processor so most known payment options like credit card, PayPal, SEPA transfer and others are available. A list of all options can be found"," ",(0,y.jsx)("a",{href:"https://stripe.com/docs/payments/payment-methods/overview",title:"stripe payment options",target:"_blank",children:"here"}),"."]}),(0,y.jsxs)("details",{children:[(0,y.jsx)("summary",{children:"Can I get a discount?"}),"Discounts are provided for people that have made a significant contribution to RxDB or one of RxDB's dependencies or to the Open Source Community overall. Also for private personal projects there is the option to solve one of the",(0,y.jsx)("a",{href:"https://github.com/pubkey/rxdb/blob/master/orga/premium-tasks.md",target:"_blank",children:"Premium Tasks"}),"to get 2 years access to the Premium Plugins."]}),(0,y.jsxs)("details",{children:[(0,y.jsx)("summary",{children:"Is there any tracking code inside of the premium plugins?"}),"No, the premium plugins themself do not contain any tracking code. When you build your application with RxDB and deploy it to production, it will not make requests from your users to any RxDB server."]})]})}),(0,y.jsx)("div",{className:"block",children:(0,y.jsxs)("div",{className:"content centered",children:[(0,y.jsxs)("h2",{children:["RxDB Premium Plugins ",(0,y.jsx)("b",{className:"underline",children:"Overview"})]}),(0,y.jsxs)("div",{className:"premium-blocks",children:[(0,y.jsx)("a",{href:"/rx-storage-indexeddb.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-right-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"RxStorage IndexedDB"}),(0,y.jsxs)("p",{children:["A storage for browsers based on ",(0,y.jsx)("b",{children:"IndexedDB"}),". Has the best latency on writes and smallest build size."]})]})})}),(0,y.jsx)("a",{href:"/rx-storage-opfs.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"RxStorage OPFS"}),(0,y.jsxs)("p",{children:["Currently the RxStorage with best data throughput that can be used in the browser. Based on the ",(0,y.jsx)("b",{children:"OPFS File System Access API"}),"."]})]})})}),(0,y.jsx)("a",{href:"/rx-storage-sqlite.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-right-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"RxStorage SQLite"}),(0,y.jsxs)("p",{children:["A fast storage based on ",(0,y.jsx)("b",{children:"SQLite"})," for Servers and Hybrid Apps. Can be used with"," ",(0,y.jsx)("b",{children:"Node.js"}),", ",(0,y.jsx)("b",{children:"Electron"}),", ",(0,y.jsx)("b",{children:"React Native"}),", ",(0,y.jsx)("b",{children:"Capacitor"}),"."]})]})})}),(0,y.jsx)("a",{href:"/rx-storage-shared-worker.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"RxStorage SharedWorker"}),(0,y.jsxs)("p",{children:["A RxStorage wrapper to run the storage inside of a SharedWorker which improves the performance by taking CPU load away from the main process. Used in ",(0,y.jsx)("b",{children:"browsers"}),"."]})]})})}),(0,y.jsx)("a",{href:"/rx-storage-worker.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"RxStorage Worker"}),(0,y.jsx)("p",{children:"A RxStorage wrapper to run the storage inside of a Worker which improves the performance by taking CPU load away from the main process."})]})})}),(0,y.jsx)("a",{href:"/rx-storage-sharding.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-right-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"RxStorage Sharding"}),(0,y.jsx)("p",{children:"A wrapper around any other storage that improves performance by applying the sharding technique."})]})})}),(0,y.jsx)("a",{href:"/rx-storage-memory-mapped.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"RxStorage Memory Mapped"}),(0,y.jsx)("p",{children:"A wrapper around any other storage that creates a mapped in-memory copy which improves performance for the initial page load time and write & read operations."})]})})}),(0,y.jsx)("a",{href:"/rx-storage-memory-synced.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"RxStorage Memory Synced"}),(0,y.jsx)("p",{children:"A wrapper around any other storage that creates a synced in-memory copy which improves performance for the initial page load time and write & read operations."})]})})}),(0,y.jsx)("a",{href:"/query-optimizer.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-right-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"Query Optimizer"}),(0,y.jsx)("p",{children:"A tool to find the best index for a given query. You can use this during build time to find the best index and then use that index during runtime."})]})})}),(0,y.jsx)("a",{href:"/rx-storage-localstorage-meta-optimizer.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"RxStorage Localstorage Meta Optimizer"}),(0,y.jsxs)("p",{children:["A wrapper around any other storage which optimizes the initial page load one by using localstorage for meta key-value document. Only works in ",(0,y.jsx)("b",{children:"browsers"}),"."]})]})})}),(0,y.jsx)("a",{href:"/encryption.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-right-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"WebCrypto Encryption"}),(0,y.jsx)("p",{children:"A faster and more secure encryption plugin based on the Web Crypto API."})]})})}),(0,y.jsx)("a",{href:"/rx-storage-filesystem-node.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"RxStorage Filesystem Node"}),(0,y.jsxs)("p",{children:["A fast RxStorage based on the ",(0,y.jsx)("b",{children:"Node.js"})," Filesystem."]})]})})}),(0,y.jsx)("a",{href:"/logger.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-right-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"Logger"}),(0,y.jsx)("p",{children:"A logging plugin useful to debug performance problems and for monitoring with Application Performance Monitoring (APM) tools like Bugsnag, Datadog, Elastic, Sentry and others"})]})})}),(0,y.jsx)("a",{href:"/rx-server.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"RxServer Fastify Adapter"}),(0,y.jsx)("p",{children:"An adapter to use the RxServer with fastify instead of express. Used to have better performance when serving requests."})]})})}),(0,y.jsx)("a",{href:"/logger.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-right-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"RxServer Koa Adapter"}),(0,y.jsx)("p",{children:"An adapter to use the RxServer with Koa instead of express. Used to have better performance when serving requests."})]})})}),(0,y.jsx)("a",{href:"/reactivity.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-left-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"Reactivity Vue"}),(0,y.jsx)("p",{children:"An extension for Vue.js to get vue shallow-ref objects to observe RxDB state instead of rxjs observables."})]})})}),(0,y.jsx)("a",{href:"/reactivity.html",target:"_blank",children:(0,y.jsx)("div",{className:"premium-block hover-shadow-middle bg-gradient-right-top",children:(0,y.jsxs)("div",{className:"premium-block-inner",children:[(0,y.jsx)("h4",{children:"Reactivity Preact Signals"}),(0,y.jsx)("p",{children:"An extension for react/preact to get preact signals to observe RxDB state instead of rxjs observables."})]})})})]})]})}),(0,y.jsx)(w,{open:_,onClose:()=>{R(!1)}})]})})]})}function x(e,t){if(void 0===t)return;const r=document.querySelector("[name="+e+"]");r&&(r.type&&"checkbox"===r.type?r.checked=t:r.value=t)}function w(e){let{onClose:t,open:r}=e;return(0,y.jsx)(l.A,{className:"modal-consulting-page",open:r,width:"auto",onCancel:()=>{t()},closeIcon:null,footer:null,children:(0,y.jsxs)("iframe",{style:{width:"100%",height:"70vh",borderRadius:"32px"},id:"request-project-form",src:"https://webforms.pipedrive.com/f/c5cAfYVe373ccihUfJkyxdU2zg5Iz2liQB09nU6jOQCyRXOJy6W7qPdQdmomvugRj5",children:["Your browser doesn't support iframes,"," ",(0,y.jsx)("a",{href:"https://webforms.pipedrive.com/f/c5cAfYVe373ccihUfJkyxdU2zg5Iz2liQB09nU6jOQCyRXOJy6W7qPdQdmomvugRj5",target:"_blank",rel:"nofollow",children:"Click here"})]})})}},7810:(e,t,r)=>{function a(e){return e[e.length-1]}function n(e){return Array.isArray(e)?e.slice(0):[e]}function i(e){return Array.isArray(e)}function s(e){return null!=e}function o(e,t){var r=0,a=-1;for(var n of e){if(!t(n,a+=1))break;r+=1}return r}function c(e,t){for(var r=t.length,a=0;a<r;++a){var n=t[a];e.push(n)}}function l(e){return e.filter((function(e,t,r){return r.indexOf(e)===t}))}r.d(t,{$r:()=>n,Hb:()=>c,S7:()=>s,Sd:()=>o,dG:()=>a,jw:()=>l,k_:()=>i})},3337:(e,t,r)=>{function a(e,t){if(!e)throw t||(t=""),new Error("ensureNotFalsy() is falsy: "+t);return e}r.d(t,{ZN:()=>a,bz:()=>n});var n={bufferSize:1,refCount:!0}},1753:(e,t,r)=>{function a(){return new Promise((e=>setTimeout(e,0)))}function n(e){return void 0===e&&(e=0),new Promise((t=>setTimeout(t,e)))}r.d(t,{$A:()=>s,Dr:()=>i,ND:()=>n,Ve:()=>h,dY:()=>a,em:()=>o,h$:()=>d,vN:()=>c});Promise.resolve(!0);var i=Promise.resolve(!1),s=Promise.resolve(null),o=Promise.resolve();function c(e){return void 0===e&&(e=1e4),"function"==typeof requestIdleCallback?new Promise((t=>{requestIdleCallback((()=>t()),{timeout:e})})):n(0)}var l=o;function h(e){return void 0===e&&(e=void 0),l=l.then((()=>c(e)))}function d(e,t){return e.reduce(((e,t)=>e.then(t)),Promise.resolve(t))}},5734:(e,t,r)=>{r.d(t,{t:()=>n});var a=0;function n(){var e=Date.now();(e+=.01)<=a&&(e=a+.01);var t=parseFloat(e.toFixed(2));return a=t,t}}}]);